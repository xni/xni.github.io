<!DOCTYPE html>
<html><head>
<title>Reading through HEX</title>

<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">





<script src="/vendor/js/jquery.min.js" ></script>
<script src="/vendor/js/popper.min.js" ></script>
<script src="/vendor/js/bootstrap.min.js" ></script>
<script src="/vendor/js/smooth-scroll.polyfills.min.js" ></script>
<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
<script src="/vendor/js/vue.min.js" ></script>




<link rel="stylesheet" href="https://xni.github.io/scss/journal.min.5c667e74038e21ddbb9024b67930f8544e02af62491281cf73fdb817eec2947e.css" integrity="sha256-XGZ&#43;dAOOId27kCS2eTD4VE4Cr2JJEoHPc/24F&#43;7ClH4=" media="screen">

<script src="https://xni.github.io//js/loadCSS.js"></script>
<script src="https://xni.github.io//js/table.js"></script>


<script src="https://xni.github.io//js/toc.js"></script>


<script>
    loadCSS("https://fonts.googleapis.com/css?family=Lora|Montserrat|Fira+Mono|Noto+Serif+SC|Material+Icons");
</script>






</head>
<body>
    	<div id="app"><div ref="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://xni.github.io/">
    
        <div class="nav-title">
            Kostya&#39;s Blog
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	2020 Kostya&#39;s Blog
	
    </div>
    
</div><div ref="extraContainer" class="extra-container">
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#jumping-to-the-end-of-frame" v-on:click="closeDrawer" id="jumping-to-the-end-of-frame-nav">
										 Jumping to the end of frame
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#decoding-ascii-from-hex-in-mind" v-on:click="closeDrawer" id="decoding-ascii-from-hex-in-mind-nav">
										 Decoding ascii from hex in mind
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
    </div>
</div><div class="single-column-drawer-container" ref="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#jumping-to-the-end-of-frame" v-on:click="closeDrawer" id="jumping-to-the-end-of-frame-nav">
										 Jumping to the end of frame
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#decoding-ascii-from-hex-in-mind" v-on:click="closeDrawer" id="decoding-ascii-from-hex-in-mind-nav">
										 Decoding ascii from hex in mind
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav ref="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div ref="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a ref="navTitle" class="navbar-brand" href="https://xni.github.io/">
            Kostya&#39;s Blog
        </a>
    </div>
</nav>
<div class="single-column-header-container" ref="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://xni.github.io/">
        <div class="single-column-header-title">Kostya&#39;s Blog</div>
        

    </a>
</div>
            <div id="content">
<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                 style="background-image: url('/')">
                <div class="post-title">
                    Reading through HEX
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2020-04-09 21:14
                        </time>
                        

                        

                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                <div class="post-body">
                    <p>Right now I am improving our exchange connectivity libraries.
And one of the regular activities is anaylzing tcpdumps to validate what was sent over the wire.</p>
<p>Doing this for nearly for the whole week I found couple of tricks.</p>
<h2 id="jumping-to-the-end-of-frame">Jumping to the end of frame</h2>
<p>Let&rsquo;s say you have some frame-oriented protocol, like websocket
or EUREX ETI. Usually, message in those protocols start from the
<code>message_size</code> field, then the message body follows, then the next
message and so on. So, if you want to jump from message N to the
message N+1 you need to skip message-size bytes.</p>
<p>Let&rsquo;s say this is our tcpdump:</p>
<pre><code>48 00 00 00 01 02 03 04  ab cd ef f0 fe dc ba 98
00 00 11 12 45 9c 2a 23  62 22 b0 c1 38 52 55 6a
bb 52 21 01 34 a5 50 32  ba 51 b6 81 84 42 24 bb
13 ac 52 52 62 12 00 00  11 35 73 ba 51 62 72 31
58 25 40 00 30 00 00 11  31 00 62 65 bc bc 62 11
</code></pre><p>Here <code>48 00 ...</code> is the message size. Where does the second message starts from?
Before figuring out the first hack I was doing the following: 48 hex = 72 dec.
Ok, let&rsquo;s count 72 characters&hellip; so the next message is <code>31 00 ...</code></p>
<p>What I figured out eventually is that hexdump renders 16 bytes per line, so
48 in hex actually means - to find the beginning of a next message skip 4 rows
and 8 columns. That&rsquo;s it!</p>
<h2 id="decoding-ascii-from-hex-in-mind">Decoding ascii from hex in mind</h2>
<p>Some of the protocols are binary, but some are textual. <code>hexdump -C</code> is a nice thing
display both, but from time to time there are situations where you have just a wall
of hex bytes. Turned out that there are some easy rules you can decode text from the
ascii bytes.</p>
<p>So, what I ended up with: 30 in hex actually means &lsquo;0&rsquo;. It is very convinient. All of
the hex numbers in the range 30-39, just drop &lsquo;3&rsquo;, and you have a digit.
40 - is a character &lsquo;before&rsquo; the alphabet. So that &ldquo;the first letter&rdquo; - so 40 + 1, is &lsquo;A&rsquo;.
So, it is easy to decode 41-46 as &lsquo;A&rsquo;, &lsquo;B&rsquo;, &lsquo;C&rsquo;, &lsquo;D&rsquo;, &lsquo;E&rsquo; accordingly. 60 - is a character
&lsquo;before&rsquo; the lower-case alhpabet. 61 is &lsquo;a&rsquo;.</p>

                    
                    <HR width="100%" id="EOF">
                    <p style="color:#777;">Last modified on 2020-04-09</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://xni.github.io/tech/gdb-basics/">
                    Next<br>GDB basics
                </a>
                
                
                
                <a class="older-posts" href="https://xni.github.io/finance/will-exchange-survive/">
                    Previous<br>Will the exchanges survive?
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                






            </div>
        </div>
    </div>
</div>

            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	2020 Kostya&#39;s Blog
	</div>
    	</div>
    <script src="https://xni.github.io//js/journal.js"></script>
    </body>
</html>
