(function(e){var t="%",n={checkPattern:function(e,n){if(n.indexOf(t)==0&&n.lastIndexOf(t)==n.length-1){n=n.substring(1,n.length-1);return e.indexOf(n)!=-1}else{if(n.indexOf(t)==0){n=n.substring(1,n.length);return e.lastIndexOf(n)==e.length-n.length}else{if(n.lastIndexOf(t)==n.length-1){n=n.substring(0,n.length-1);return e.indexOf(n)==0}else{return e==n}}}},validateParam:function(e){return e!==undefined&&e!=null&&e!="null"&&e!="undefined"&&e!=""}},r={supports:function(){if(localStorage){return true}return false},store:function(e,t){localStorage[e]=t},getValue:function(e){return localStorage[e]},remove:function(e){localStorage.removeItem(e)}};e.ITLocalStorageAPI=r;e.InsighteraUtil=n})(window);(function(){function logMessage(e){if(isDebug&&window.console&&console.log){console.log("RTP message: "+e)}}function logMessageTime(e,t,n){if(performanceTime){if(n){logMessage(e+(t-n))}else{logMessage(e+(t-performanceTime.domLoading))}}else{logMessage(e)}}if(window.AITag){return}var scriptExecutionTime=(new Date).getTime(),msgCallTime=0,viewTime=0,isDebug=false;var performanceTime=window.performance&&window.performance.timing;var AITag=new function(){function consoleMessage(e){if(console&&console.log){console.log(e)}}function createCORSRequest(e,t){var n=new XMLHttpRequest;if("withCredentials"in n){try{n.open(e,t,true)}catch(r){consoleMessage(r)}}else{if(typeof XDomainRequest!="undefined"){n=new XDomainRequest;n.open(e,t)}else{n=null}}return n}function makeCorsRequest(e,t){if(e===undefined||e==null||e==""){return}if(e.indexOf("http")!=0&&e.indexOf("https")!=0){e=AITag.getConfig("protocol")+"://"+e}var n=createCORSRequest("GET",e);if(!n){consoleMessage("CORS not supported");return}n.onload=function(){var e=n.responseText;var r=JSON.parse(e);if(r.status==200){if(typeof t=="function"){t(r)}}else{consoleMessage(r.errorMessage)}};n.onerror=function(){};n.send()}function extractParam(e,t){return decodeURIComponent(((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)")).exec(e)||[,""])[1].replace(/\+/g,"%20"))||null}function injectScript(e,t,n){var r=document.createElement("script");r.type="text/javascript";try{r.innerHTML=n}catch(i){r.text=n}var s=document.getElementsByTagName(e);if(s&&s.length>0){s=s[0];switch(t){case"FIRST":s.insertBefore(r,head.firstChild);break;case"LAST":s.appendChild(r);break;default:break}}}function isRecommendation(e){var t=e.indexOf("?");if(t!=-1){var n=e.substring(t);if(n.indexOf("iesrc=rcmd")!=-1){return true}}return false}function random(){return"xxxxxxxx".replace(/[x]/g,function(e){var t=Math.random()*16|0;return t.toString(16)})}function generateUUID(){var e=AITag.getConfig("accountId");if(e){e=e.replace(".","-")}return e+"-"+(new Date).getTime()+"-"+random()}function copyVcCookie(){var e=AITag.getCookie(COOKIE_TRW_VISITOR_UID);if(e!=null){var t=e.split(COOKIE_VAL_SEPERATOR);var n=AITag.getCookie(COOKIE_TRW_COUNT);if(n!=null){t[1]=parseInt(n);var r=t[0]+COOKIE_VAL_SEPERATOR+t[1];var i=AITag.getCookie(COOKIE_TRW_IE_EMAIL);if(i!=null){r+=COOKIE_VAL_SEPERATOR+1}AITag.setCookie(COOKIE_TRW_VISITOR_UID,r,exp_2_year)}}}function copyCpvCookie(){if(!AITag.isNewSession()){var e=sessionId.split(COOKIE_VAL_SEPERATOR);var t=AITag.getCookie(COOKIE_TRW_CLICK_PER_VISIT);if(t!=null){var n=t.split(SESSION_ID_CLICKS_SEPERATOR);var r=parseInt(n[1]);e[1]=r;AITag.setCookie(COOKIE_TRW_SESSION_ID,e[0]+COOKIE_VAL_SEPERATOR+e[1],exp_30_minutes)}}}function runAsyncQueue(){if(nonjQueryCampaignQueue){logMessageTime("try to run campaigns that doesn't require jQuery. Time since DOM loading: ",(new Date).getTime());var e=nonjQueryCampaignQueue.length;for(var t=0;t<e;t++){var n=nonjQueryCampaignQueue.shift();var r=n.shift();try{AITag[r].apply(AITag,n)}catch(i){}}}}function executeInnerScripts(htmlMessage){var div=document.createElement("div");div.innerHTML=htmlMessage;var nodes=div.childNodes;div=null;var node;for(var i=0;nodes[i]!=null;i++){node=nodes[i];if(typeof node.getElementsByTagName!=="undefined"){var scripts=node.getElementsByTagName("script");if(scripts!==undefined&&scripts!=null){for(var j=0;j<scripts.length;j++){(function(script){eval.call(window,script)})(scripts[j].text||scripts[j].textContent||scripts[j].innerHTML||"")}}}if(nodes[i].nodeName.toLowerCase()=="script"){(function(script){eval.call(window,script)})(nodes[i].text||nodes[i].textContent||nodes[i].innerHTML||"")}}}function pushCampaignData(e,t,n){try{if(n===undefined&&e.sticky){campaignStorage.exc(["storeCampaign",e,t])}}catch(r){logMessage("failed to store sticky campaign")}if(isAnalyticsEnabled()&&n!=false){try{iiq.push(["pushCampaign",e.reactionId,"Impression",e.reactionName,e.segmentName,getSessionId(),e.campaignLabels])}catch(r){}}try{if(AITag.getConfig("userContextAPI")){var i=getVisitCount();if(i!=null){rtp("add","toCmpTl",i,e.reactionId,0)}addCampaignToRTPGlobal(e.reactionId,0)}}catch(r){}presentedCampaigns[e.reactionId]=true;AITag.showInzoneElements()}function injectInzoneCampaign(e,t,n){logMessage("trying to inject inzone campaign");var r=false;var i=e.targetDiv;var s=document.getElementById(i);if(s&&s.id==i){executeInnerScripts(e.content);s.innerHTML=e.content;if(typeof n==="undefined"||!n){cpq.push(["bindConversionListener",i,e.reactionId,t])}pushCampaignData(e,t,n);logMessageTime("changed div "+i+" after: ",(new Date).getTime());r=true}else{if(!activeCampaignMap[e.reactionId]){activeCampaignMap[e.reactionId]=[e,t,n];injectScript("body","LAST","(function(){AITag.activateCampaign("+e.reactionId+");})()")}}return r}function sendMktoToken(){var e=this.extractURLParameter("mkt_tok");if(e!=null&&e!=""&&!mktoExistOnClick){var t=null;getMktoTokenInterval=setInterval(function(){logMessage("get mkto cookie interval called");if(t==null){t=(new Date).getTime()}var e=false;var n=AITag.getCookie(COOKIE_MARKETO_TOKEN);if(typeof n!="undefined"&&n!=null&&n!=""){e=true;AITag.addDynamicScript(AITag.getConfig("gwUrlPrefix")+"/put/munchkinId?aid="+AITag.getConfig("accountId")+"&id="+encodeURIComponent(n))}if((new Date).getTime()-t>2e4||e){logMessage("clearing interval for get marketo");clearInterval(getMktoTokenInterval)}},50)}}function addToParams(e,t,n){if(e===void 0||e==null){e=""}if(t!==void 0&&t!=null){for(var r in t){if(t.hasOwnProperty(r)){if(e.length>0&&e.lastIndexOf("&")<e.length-1){e+="&"}var i=n!==undefined?e.indexOf(r)!=-1||n.indexOf(r)!=-1:e.indexOf(r)!=-1;if(!i){e+=r+"="+t[r]}}}}return e}function addParams2URI(e,t){if(t!==undefined&&t!=null){var n="",r="";var i=e.indexOf("?");var s=e.indexOf("#");if(i>-1){if(s==-1){s=e.length-1}r=e.substring(i,s)}n=addToParams(n,t,r);var o="";if(s>-1&&s!=e.length-1){o=e.substring(s);e=e.substring(0,s)}if(i>-1){if(i+1<e.length){e+="&"}}else{e+="?"}e+=n+o}return e}function removeURIParam(e,t){var n=e.indexOf("?");if(n>-1){var r=e.substring(n);var i,s="",o={};for(var u=0;u<t.length;u++){if(s.length>0){s+="&"}i=extractParam(e,t[u]);s+=t[u]+"="+i;o[t[u]]=i}if(r.length==s.length+1){e=e.substring(0,n)}else{var a,f;for(var l in o){if(o.hasOwnProperty(l)){if(e.indexOf(l)>-1){f="";a=e.charAt(e.indexOf(l)-1);if(a=="&"){f="&"}f+=l+"="+o[l];e=e.replace(f,"")}}}}e=e.replace("?&","?")}return e}function done(){if(!isReady){var e=(new Date).getTime();logMessageTime("DOM is ready called. Time since DOM loading: ",e,performanceTime&&performanceTime.domContentLoadedEventStart)}isReady=true;if(document.addEventListener||event.type==="load"||document.readyState==="complete"){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",done,false);window.removeEventListener("load",done,false)}else{document.detachEvent("onreadystatechange",done);window.detachEvent("onload",done)}while(readyQueue.length){var t=readyQueue.shift();if(typeof t==="function"){t.apply(AITag)}}}}function addDOMReadyListener(e){readyQueue.push(e);if(document.readyState==="complete"){e.apply(AITag)}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",done,false);window.addEventListener("load",done,false)}else{document.attachEvent("onreadystatechange",done);window.attachEvent("onload",done)}}}function isAnalyticsEnabled(){return AITag.getConfig("googleAnalytics")||AITag.getConfig("enableSiteCatalyst")||AITag.getConfig("enableUAnalytics")}var cdnSrc=null;var config={enableYoutubeApi:true,googleAnalytics:true,sCatSgmEvNum:21,barIconFont:"fa-chevron",trackAsset:false,sCatEnableCampaignPush:false,uaEnableRecommendationPush:false,uaSizeIndex:3,enableTag:true,jQueryUIDialogPath:"/jquery-ui-1.8.17-dialog.js",dialogCloseButton:"/dialog-close.png",uaEnableIndustryPush:false,sCatSgmIndNum:21,jQueryVersion:"1.8.3",sCatCtaIndNum:23,background_color:"#1A95CE",gaIndustrySlot:1,jqueryUrl:"ajax.googleapis.com/ajax/libs/jquery/VERSION/jquery.min.js",youTubeApiUrl:"www.youtube.com/player_api",link_color:"white",arrowLeftPath:"/black_01.png",sCatEnableSegmentPush:false,loadOnlyJQueryDialog:false,startup:true,enableSiteCatalyst:false,captureLeads:true,cdnSrcSSL:"https://42f2433b18538895fc41-dcf1c515f0be6b969f2cc5ae37271723.ssl.cf2.rackcdn.com",jqueryUiCssExistsOnPage:false,sCatIndVarNum:20,timeoutDelay:3,inZoneBlockingTimeout:0,gaEnableCampaignPush:false,uaEnableSegmentPush:false,uaEnableABMPush:false,sCatEnableVisitorOrganization:false,enableUAnalytics:true,gaOrganizationSlot:2,ignoreUrlParams:true,requiredCssPath:"/insightera-1.1.css",font_color:"black",getAllEmails:true,gwUrlPrefix:"cloud2.insightera.com/gw1",userContextAPI:false,barIconColor:"#ffffff",pollingDelay:2,sCatOrgVarNum:21,sCatCtaEvNum:20,cdnSrc:"http://90d53a0d90598f9cf3a5-dcf1c515f0be6b969f2cc5ae37271723.r87.cf2.rackcdn.com",arrowRightPath:"/black_02.png",font_size:"12px",uaEnableRevenuePush:false,pollingPerPage:1,bar_position:"bottom",debug:false,uaEnableCampaignPush:false,jQueryUIVersion:"1.9.2",uaRevenueIndex:4,useExistingJQuery:true,font_family:"arial",gaEnableOrganizationtPush:false,uaOrganizationIndex:1,sCatEnableVisitorIndustry:false,uaEnableSizePush:false,uaIndustryIndex:2,dialogCloseTime:30,disableClick:false,gaEnableVisitorIndustry:false,initialDelay:50,bar_tab_position:"right",sCatCtaOrgNum:22,requestInterval:50,jqueryUIUrl:"ajax.googleapis.com/ajax/libs/jqueryui/VERSION/jquery-ui.min.js",barIconOpacity:.4,jQueryUICustomCssPath:"/jquery-ui-insightera-custom-1.5.css",uaEnableOrganizationPush:false,enableRecommendationBar:false,sCatSgmOrgNum:20,disablePoll:false,loadJquery:false,uaABMIndex:5,gaEnableSegmentPush:false};var inzoneIds="";var exp_2_year=new Date;var exp_30_minutes=new Date;exp_2_year.setTime(exp_2_year.getTime()+730*24*60*60*1e3);exp_30_minutes.setTime(exp_30_minutes.getTime()+30*60*1e3);var sessionId=null;var sessionExpireId=null;var isDialogPresented=false;var second=1e3;var newVisitor=false;var newSession=false;var COOKIE_TRW_SESSION_ID="trwsa.sid";var COOKIE_TRW_SEARCH_TERMS="trwsb.stu";var COOKIE_TRW_CLICK_PER_VISIT="trwsb.cpv";var COOKIE_TRW_CREATION_DATE="trwv.crd";var COOKIE_TRW_COUNT="trwv.vc";var COOKIE_TRW_LAST_VISIT="trwv.lvd";var COOKIE_TRW_EMAIL="trwv.eml";var COOKIE_TRW_VISITOR_UID="trwv.uid";var COOKIE_TRW_IE_EMAIL="_ie_eml";var COOKIE_TRW_IE_CPN="_ie_cpn";var COOKIE_TRW_SESSION_ID_EXPIRE="trwsb.sid";var COOKIE_TRW_CURRENT_VISIT="trwv.cvd";var ESP_COOKIES_ARR=[COOKIE_TRW_SESSION_ID,COOKIE_TRW_EMAIL,COOKIE_TRW_VISITOR_UID];var unusedCookies=[COOKIE_TRW_SEARCH_TERMS,COOKIE_TRW_CLICK_PER_VISIT,COOKIE_TRW_CREATION_DATE,COOKIE_TRW_COUNT,COOKIE_TRW_LAST_VISIT,COOKIE_TRW_IE_EMAIL,COOKIE_TRW_IE_CPN,COOKIE_TRW_CURRENT_VISIT,COOKIE_TRW_SESSION_ID_EXPIRE];var COOKIE_TRW_LOG="trw1.LOG";var COOKIE_MARKETO_TOKEN="_mkto_trk";var SESSION_ID_CLICKS_SEPERATOR="$$$###";var COOKIE_VAL_SEPERATOR=":";var IMPRESSION_SUFFIX=":0";var CONVERSION_SUFFIX=":1";var MA_TYPE_MARKETO="1";var MA_TYPE_NONE="0";var VISITOR_UUID="REPLACE_VUUID";var SESSION_UUID="REPLACE_SUUID";var VISITOR_IP="REPLACE_IP";var POSITION_TOP="50";var widgetSide="";var PDF=".pdf";var PPT=".ppt";var PPTX=".pptx";var HTML5_VIDEO_MP4=".mp4";var HTML5_VIDEO_OGG=".ogg";var HTML5_VIDEO_WEBM=".webm";var RTP_PARAM_INDICATION="iesrc",RCMD_PARAM_VALUE="rcmd",ASSET_ID_PARAM="astid",ASSET_TYPE_PARAM="at";var ASSETS_SUFFIX_ARR=[PDF,PPT,PPTX,HTML5_VIDEO_MP4,HTML5_VIDEO_OGG,HTML5_VIDEO_WEBM];var TARGET_VAL=["_self","_parent","_top"];var PLAYERS=["youtube","wistia","vimeo"];var WISTIA_API_SRC="fast.wistia.net/static/iframe-api-v1.js";var VIMEO_API_SRC="/froogaloop.js";var playersData={players:{},playerIds:[],lastCount:0};var VIMEO_PLAYER_ID="player_id";var EMAIL_REG=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;var BAR_CDN_PATH="/insightera-bar-1.6.js";var GA_CDN_PATH="/ga-integration-1.9.js";var fontsCss="netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css";var domainLevel=null;var localStorageApi=ITLocalStorageAPI;window.iiq=window.iiq||[];window.ibq=window.ibq||[];var cpq=[];var rcmdq=[];var campaignLinks={};var assetLinks={};var nonjQueryCampaignQueue=[];var mktoExistOnClick=false;var eventFirstClick=false;var isReady=false;var getInternetExplorerVersion=function(){var e=-1;if(navigator.appName=="Microsoft Internet Explorer"){var t=navigator.userAgent;var n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(n.exec(t)!=null){e=parseFloat(RegExp.$1)}}else{if(navigator.appName=="Netscape"){var t=navigator.userAgent;var n=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");if(n.exec(t)!=null){e=parseFloat(RegExp.$1)}}}return e};var checkIESupported=function(){var e=getInternetExplorerVersion();if(e>-1&&e<8){return false}else{if(e>7){if(document.documentMode&&document.documentMode<8){return false}}}return true};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++){if(this[t]==e){return t}}return-1}}var campaignStorage=new function(){var e="it.cs",t="dialog",n="widget",r="sid",i=this;trackObj=null,isCurrentSession=function(e){if(e[r]!==getSessionId()){return false}return true};this.init=function(){trackObj=window.AITag||null};this.getStoredCampaigns=function(){var t=null;if(localStorageApi.supports()){t=localStorageApi.getValue(e);if(t!==undefined&&t!=null){t=JSON.parse(t)}}return t};this.showStoredCampaigns=function(){if(localStorageApi.supports()){var t=i.getStoredCampaigns();if(t!==undefined&&t!=null&&isCurrentSession(t)){for(var n in t){if(t.hasOwnProperty(n)&&n!=r){try{trackObj.msgCallback(t[n][0],t[n][1],false)}catch(s){logMessage("failed to show stored campaign. error: "+s.message)}}}}else{localStorageApi.remove(e)}}};this.storeCampaign=function(n,i){if(localStorageApi.supports()){var s=this.getStoredCampaigns();if(s===undefined||s==null){s={}}else{if(!isCurrentSession(s)){s={}}}s[r]=getSessionId();if(n.targetDiv){s[n.targetDiv]=[n,i]}else{s[t]=[n,i]}localStorageApi.store(e,JSON.stringify(s))}};this.exc=function(e){try{var t=e.shift();i[t].apply(i,e)}catch(n){console.log(n)}}};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}this.activateRecommendation=function(){if(this.getConfig("enableRecommendationBar")){var expression=this.getConfig("excludedUrlsRecommendation");var match=true;var condition="";if(expression!==undefined){var url=window.location.pathname;condition=expression.substring(0,expression.indexOf("[")-1).trim();var excludeUrls=expression.substring(expression.indexOf("["));excludeUrls=eval(excludeUrls);for(var index=0;index<excludeUrls.length;index++){match=InsighteraUtil.checkPattern(url,excludeUrls[index]);if(condition=="in"&&match){break}if(match){this.setConfig("enableRecommendationBar",false);return}}}if(condition=="in"&&!match){this.setConfig("enableRecommendationBar",false);return}this.addDynamicScript(cdnSrc+BAR_CDN_PATH,function(){});logMessageTime("loaded recommendation Bar. Time since DOM loading: ",(new Date).getTime())}};this.eventCallback=function(e){};this.updateInitialConfig=function(){if(!window.AIConfig){window.AIConfig={}}campaignStorage.init();this.setDefaultConfig("protocol","https:"==document.location.protocol?"https":"http");cdnSrc=AITag.getConfig("protocol")=="http"?this.getConfig("cdnSrc"):this.getConfig("cdnSrcSSL");var e=this.getConfig("jqueryUrl");e=e.replace("VERSION",this.getConfig("jQueryVersion"));var t=this.getConfig("jqueryUIUrl");t=t.replace("VERSION",this.getConfig("jQueryUIVersion"));this.setConfig("jqueryUrl",e);this.setConfig("jqueryUIUrl",t);this.setConfig("moderntrim2CloseButton","/modern-trim-II-close.png");this.setConfig("dialogTransparentButton","/trans_x.png");this.pollIntervalCounter=0;var n=this.getCookie(COOKIE_MARKETO_TOKEN);if(n!=null){this.setDefaultConfig("ma",MA_TYPE_MARKETO)}else{this.setDefaultConfig("ma",MA_TYPE_NONE)}addDOMReadyListener(runAsyncQueue);if(window.rtp){this.setConfig("pollingPerPage",2)}if(isAnalyticsEnabled()){try{iiq.push(["setGWPrefix",AITag.getConfig("gwUrlPrefix")]);iiq.push(["updateConfig",{eGaIndrPush:AITag.getConfig("gaEnableVisitorIndustry"),eGaOrgPush:AITag.getConfig("gaEnableOrganizationtPush"),eGaSgmPush:AITag.getConfig("gaEnableSegmentPush"),eGaCmpPush:AITag.getConfig("gaEnableCampaignPush"),eSIndrPush:AITag.getConfig("sCatEnableVisitorIndustry"),eSOrgPush:AITag.getConfig("sCatEnableVisitorOrganization"),eSSgmPush:AITag.getConfig("sCatEnableSegmentPush"),eSCtaPush:AITag.getConfig("sCatEnableCampaignPush"),gaIndrSlot:AITag.getConfig("gaIndustrySlot"),gaOrgSlot:AITag.getConfig("gaOrganizationSlot"),sIndCC:AITag.getConfig("sCatIndVarNum"),sOrgCC:AITag.getConfig("sCatOrgVarNum"),sSgmCE:AITag.getConfig("sCatSgmEvNum"),sCmpCE:AITag.getConfig("sCatCtaEvNum"),eGA:AITag.getConfig("googleAnalytics"),eSC:AITag.getConfig("enableSiteCatalyst"),sSgmOrgTV:AITag.getConfig("sCatSgmOrgNum"),sSgmIndTV:AITag.getConfig("sCatSgmIndNum"),sCmpOrgTV:AITag.getConfig("sCatCtaOrgNum"),sCmpIndTV:AITag.getConfig("sCatCtaIndNum"),gaOrgIndex:AITag.getConfig("ugaOrgIndex"),gaIndrIndex:AITag.getConfig("ugaIndrIndex"),gaSgmIndex:AITag.getConfig("ugaSgmIndex"),eUA:AITag.getConfig("enableUAnalytics"),eUAOrgPush:AITag.getConfig("uaEnableOrganizationPush"),eUAIndrPush:AITag.getConfig("uaEnableIndustryPush"),eUASizePush:AITag.getConfig("uaEnableSizePush"),eUARevenuePush:AITag.getConfig("uaEnableRevenuePush"),eUAaBMPush:AITag.getConfig("uaEnableABMPush"),eUASgmPush:AITag.getConfig("uaEnableSegmentPush"),eUACtaPush:AITag.getConfig("uaEnableCampaignPush"),eUARcmdPush:AITag.getConfig("uaEnableRecommendationPush"),uaOrgIndex:AITag.getConfig("uaOrganizationIndex"),uaIndrIndex:AITag.getConfig("uaIndustryIndex"),uaSizeIndex:AITag.getConfig("uaSizeIndex"),uaRevenueIndex:AITag.getConfig("uaRevenueIndex"),uaABMIndex:AITag.getConfig("uaABMIndex"),newV:AITag.isNewVisitor(),newS:newSession,aid:AITag.getConfig("accountId")}]);iiq.push(["pushCustomData",getSessionId()]);iiq.push(["pushSegment"])}catch(r){}}};var getDomain=function(e,t){if(t!=null&&t===parseInt(t)){for(var n=e.split(".");n.length>t&&n.length>2;){n.shift()}return n.join(".")}n=/([^.]+\.[^.]{3,})$/i.exec(e);return n!=null?n[1]:(n=/([^.]+\.[^.]+\.[^.]{2})$/i.exec(e),n!=null?n[1]:e)};var bindMessageEvent=function(){var e=function(e){if(e.origin!=="http://localhost:8080"){return}AITag.foundEmail(e.data)};AITag.addEvent("message",window,e)};this.extractURLParameter=function(e){return extractParam(location.search,e)};this.checkExcludeUrls=function(){var e=this.getConfig("excludeUrls");if(e!==undefined){var t=this.getConfig("ignoreUrlParams");if(typeof t=="undefined"){t=true}var n=window.location.pathname;if(!t){n+=window.location.search}for(var r=0;r<e.length;r++){if(InsighteraUtil.checkPattern(n,e[r])){return true}}}return false};this.hex2rgb=function(e,t){var n=e.replace("#","").match(/(.{2})/g);var r=3;while(r--){n[r]=parseInt(n[r],16)}if(typeof t=="undefined"){return"rgb("+n.join(", ")+")"}return"rgba("+n.join(", ")+", "+t+")"};this.rgb2hex=function(e){var t;var n="",r="";var i=0;if(e.indexOf("rgba")==-1){t=e.replace("rgb(","");t=t.replace(")","").replace(" ","").split(",")}else{t=e.replace("rgba(","").replace(")","").replace(" ","").split(",")}if(t.length==3){n+="#ff"}else{n+="#"+Math.floor(t[3]*255).toString(16)}while(i<3){r=(t[i]*1).toString(16);r=r.length==1?"0"+r:r;n+=r;i++}return n};this.addEvent=function(e,t,n){if(t.addEventListener){t.addEventListener(e,n,true)}else{if(t.attachEvent){t.attachEvent("on"+e,n)}else{t[e]=n}}};this.addScriptInHeader=function(e){var t=document.createElement("script");t.type="text/javascript";try{t.innerHTML=e}catch(n){t.text=e}var r=document.getElementsByTagName("head")[0];r.insertBefore(t,r.firstChild)};this.onPlayerStateChange=function(e){e=e||window.event;var t=e.target||e.srcElement;var n=t.getVideoData();if(n){var r=playersData.players.youtube[n.video_id];if(e.data==1&&typeof r.sendVideoAsset=="undefined"){AITag.sendClick(t.getVideoUrl(),null,{yt:1});playersData.players.youtube[n.video_id].sendVideoAsset=1}}};this.onYoutubeReady=function(){e=e||window.event;var t=e.target||e.srcElement;var n=playersData.players.youtube[t.a.id];n.addEventListener("onStateChange",AITag.onPlayerStateChange())};var rcmdClickObjName="rtpRH",visitorIdProp="vi",rcmdHistoryProp="rcmdH",expRcmd=1e3*60*60*24*90,storeRcmdClick="storeClick",cleanRCMDHistory="cleanHistory",getAsParams="getAsParams",extractAssetId="extractAssetId",getLastRCMD="getLastRCMD";var RCMDStorage={};RCMDStorage[cleanRCMDHistory]=function(e,t,n){var r=null;var i=[];for(var s=0;s<e.length;s++){for(var o in e[s]){if(e[s].hasOwnProperty(o)){if(e[s][o]+expRcmd<t){i.push(s)}else{if(n&&o==n){i.push(s)}}}}}if(i.length>0){for(var u=0;u<i.length;u++){e.splice(i[u]-u,1)}}if(e.length==5){e.splice(0,1)}return e};RCMDStorage[getLastRCMD]=function(e,t){var n=null,r=null;for(var i=0;i<e.length;i++){for(var s in e[i]){if(e[i].hasOwnProperty(s)){if(e[i][s]+expRcmd>t){if(n==null||r<e[i][s]){n=s;r=e[i][s]}}}}}return n};RCMDStorage[storeRcmdClick]=function(e){var t=getVisitorId();var n=(new Date).getTime();if(t!=null){var r=localStorageApi.getValue(rcmdClickObjName);if(r!==void 0){r=JSON.parse(r);if(r[visitorIdProp]&&r[visitorIdProp]==t){var i=r[rcmdHistoryProp];if(i===void 0||i==null){i=[]}else{i=this[cleanRCMDHistory](i,n,e)}}else{r={};i=[]}}else{r={};i=[]}var s={};s[e]=n;i.push(s);r[visitorIdProp]=t;r[rcmdHistoryProp]=i;localStorageApi.store(rcmdClickObjName,JSON.stringify(r))}};RCMDStorage[getAsParams]=function(){var e=null;var t=getVisitorId();var n=localStorageApi.getValue(rcmdClickObjName);if(n!==void 0){n=JSON.parse(n);var r=(new Date).getTime();if(n[visitorIdProp]&&n[visitorIdProp]==t){rcmdHistory=this[cleanRCMDHistory](n[rcmdHistoryProp],r,null);var i=[];for(var s=0;s<rcmdHistory.length;s++){for(var o in rcmdHistory[s]){if(rcmdHistory[s].hasOwnProperty(o)){i.push(o)}}}if(i.length>0){e={};e.rch=i.join();var u=this[getLastRCMD](rcmdHistory,r);if(u!=null){e.lcrc=u}}}}return e};RCMDStorage[extractAssetId]=function(e){return extractParam(e,ASSET_ID_PARAM)};var discoverRecommendation=function(e){var t=e.indexOf("?");if(t!=-1){var n=e.substring(t);if(n.indexOf("iesrc=rcmd")!=-1){try{var r=RCMDStorage[extractAssetId](n);if(r){RCMDStorage[storeRcmdClick].call(RCMDStorage,r)}}catch(i){}AITag.sendClick(encodeURIComponent(e),null,{cmd:3,asid:r},true)}}};var getPalyerId=function(e,t){var n;if(typeof e.id!="undefined"&&e.id!=null&&e.id!=""){n=e.id}else{e.id="player"+t;n="player"+t}return n};this.addPlayer=function(e,t,n,r){players=playersData.players[e];if(players===undefined){players={}}var i={};i.player=t;i.src=r;players[n]=i;playersData.players[e]=players};var createVimeoEventListener=function(e,t){(function(e,t,n){var r=$f(e);AITag.addPlayer(t,r,e.id,n);r.addEvent("ready",function(){var e=playersData.players.vimeo;for(var t in e){(function(e,t){if(e.element.contentWindow!=null){e.addEvent("play",function(e,t){return function(){AITag.sendClick(t,null,{yt:1});e.removeEvent("play")}}(e,t))}})(e[t].player,e[t].src)}})})(e,t,e.src)};var bindPlayerEvent=function(e,t,n,r){iframeId=getPalyerId(t,n);var i;switch(e){case"youtube":try{var s=r;var o=s.indexOf("?");if(o>-1){s=s.substring(0,o)}var u=s.lastIndexOf("/");var a=s.substring(u+1);(function(e,n,i){if(r.indexOf("?")!=-1&&r.indexOf("enablejsapi=1")==-1){t.src+="&enablejsapi=1"}else{if(r.indexOf("api=1")==-1){t.src+="?enablejsapi=1"}}var s=new YT.Player(n,{events:{onStateChange:AITag.onPlayerStateChange}});AITag.addPlayer(e,s,i)})(e,iframeId,a)}catch(f){AITag.addScriptInHeader("function onYouTubeIframeAPIReady(){player"+n+" = new YT.Player('"+iframeId+"', {events: {'onStateChange': AITag.onPlayerStateChange}}); AITag.addPlayer('youtube', player"+n+", '"+a+"');}")}break;case"wistia":(function(e,t,n){var r=document.getElementById(t).wistiaApi;if(r){r.bind("play",function(e){return function(){AITag.sendClick(e,null,{yt:1});return this.unbind}}(n))}AITag.addPlayer(e,r,t)})(e,iframeId,r);break;case"vimeo":if(window.$f!==undefined){if(r.indexOf("?")!=-1&&r.indexOf("api=1")==-1){t.src+="&api=1"}else{if(r.indexOf("api=1")==-1){t.src+="?api=1"}}if(r.indexOf(VIMEO_PLAYER_ID)==-1){t.src+="&"+VIMEO_PLAYER_ID+"="+iframeId}else{var l=r.indexOf(VIMEO_PLAYER_ID)+VIMEO_PLAYER_ID.length;var c=r.indexOf("&",l);if(c==-1){c=r.length}var h=r.substring(l,c);t.src.replace(h,"="+iframeId)}createVimeoEventListener(t,e)}break}playersData.playerIds.push(r);n++;playersData.lastCount=n;return n};var addPlayersListerners=function(){var e=document.getElementsByTagName("iframe");var t="",n=1,r;for(var i=0;i<e.length;i++){r=e[i].src;if(r.indexOf("youtube")!=-1){n=bindPlayerEvent("youtube",e[i],n,r)}else{if(r.indexOf("wistia")!=-1){n=bindPlayerEvent("wistia",e[i],n,r)}else{if(r.indexOf("player.vimeo.com")!=-1){n=bindPlayerEvent("vimeo",e[i],n,r)}}}}};var addPlayersApis=function(){if((typeof window.jQuery!="undefined"&&typeof window.jQuery.tubeplayer=="undefined"||typeof window.jQuery=="undefined")&&AITag.getConfig("enableYoutubeApi")){AITag.addDynamicScript(AITag.getConfig("youTubeApiUrl"))}AITag.addDynamicScript(cdnSrc+VIMEO_API_SRC);AITag.addDynamicScript(WISTIA_API_SRC,function(){addPlayersListerners()},true)};var createEvent=function(e,t){var n;if(document.createEvent){n=document.createEvent("MouseEvents");n.initMouseEvent(e,t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}else{if(document.createEventObject){n=document.createEventObject();n.eventType=e}}n.eventName=e;return n};var dispatchEvent=function(e,t){var n=t.eventName;if(e.dispatchEvent){e.dispatchEvent(t)}else{if(e.fireEvent&&window.htmlEvents&&window.htmlEvents["on"+n]){e.fireEvent("on"+t.eventType,t)}else{window.open(e.href,typeof e.target=="undefined"||e.target==null||e.target==""?"_self":e.target)}}};var addEventReport=function(e,t){return function(){if(t.assetClicked===undefined){t.assetClicked=true;dispatchEvent(e,t)}}};var checkIfAssetLink=function(e,t){var n=e.href;if(assetLinks[n]&&assetLinks[n]==1){return}if(isRecommendation(n)){discoverRecommendation(n)}var r=e.pathname;var i=e.target;if(typeof i=="undefined"||i==null||i==""){i="_self"}if(typeof n!="undefined"&&n!=null&&typeof r!="undefined"&&r!=null){for(var s=0;s<ASSETS_SUFFIX_ARR.length;s++){var o=r.lastIndexOf(ASSETS_SUFFIX_ARR[s]);if(o!=-1&&o+ASSETS_SUFFIX_ARR[s].length==r.length){var u=campaignLinks[n];if(TARGET_VAL.indexOf(i)!=-1&&!u){if(t.preventDefault){t.preventDefault()}else{t.returnValue=false}}assetLinks[n]=1;var a=createEvent("click",t);a=addEventReport(e,a);AITag.setConfig("disableClick",false);AITag.sendClick(encodeURIComponent(n),function(){if(TARGET_VAL.indexOf(i)!=-1&&!campaignLinks[n]){AITag.setConfig("disableClick",true);a()}});return}}for(var s=0;s<PLAYERS.length;s++){if(n.indexOf(PLAYERS[s])!=-1){setTimeout(function(){addPlayersListerners()},800);break}}}};this.addAssetCollector=function(){if(this.getConfig("trackAsset")){AITag.addEvent("click",document,function(e){if(AITag.lastEvent&&(new Date).getTime()-AITag.lastEvent<100||e.assetClicked||e._mchInRepost){return true}AITag.lastEvent=(new Date).getTime();e=e||window.event;var t=e.target||e.srcElement;var n=AITag.jQuery(t).parents("a");if(t.tagName=="A"){checkIfAssetLink(t,e)}else{if(n.get(0)){var r=n.get(0);if(r.tagName=="A"){checkIfAssetLink(r,e)}}}if(t.tagName=="VIDEO"){AITag.sendAssetClick(function(){var e="";e=t.src;if(e==null||e==""){var n=t.children;for(var r=0;r<n.length;r++){e=n[r].src;if(typeof e!="undefined"&&e!=""){break}}}AITag.sendClick(e)})}});try{addPlayersApis()}catch(e){console.log(e)}}};this.sendAssetClick=function(e){e.apply(AITag)};this.setConfig=function(e,t){config[e]=t};this.setDefaultConfig=function(e,t){if(typeof config[e]==="undefined"){this.setConfig(e,t)}};this.escapePercent=function(e){return encodeURIComponent(e)};this.getConfig=function(e){var t=null;if(typeof config!="undefined"){t=config[e]}if(typeof t=="undefined"||t==null){t=window.AIConfig[e]}return t};var getCookieDataArray=function(e){var t=AITag.getCookie(e);if(t!=null){t=t.split(COOKIE_VAL_SEPERATOR)}return t},getVisitorId=function(){var e=null;var t=getCookieDataArray(COOKIE_TRW_VISITOR_UID);if(t!=null&&t.length>0){e=t[0]}return e},getVisitorIdParam=function(){var e=getVisitorId();if(e!=null){return COOKIE_TRW_VISITOR_UID+"="+e}return""},getVisitCount=function(){var e=null;var t=getCookieDataArray(COOKIE_TRW_VISITOR_UID);if(t!=null&&t.length>1){e=parseInt(t[1]);if(isNaN(e)){return null}}return e},getVCParam=function(){var e=getVisitCount();if(e!=null){return COOKIE_TRW_COUNT+"="+e}return""},getKnown=function(){var e=getCookieDataArray(COOKIE_TRW_VISITOR_UID);if(e!=null&&e.length>2){if(parseInt(e[2])==1){return 1}}return 0},getKnownParam=function(){var e=getKnown();if(e==1){return COOKIE_TRW_IE_EMAIL+"="+e}return""};getSessionId=function(){var e=null;var t=getCookieDataArray(COOKIE_TRW_SESSION_ID);if(t!=null&&t.length>0){e=t[0]}return e},getSessionIdParam=function(){var e=this.getSessionId();if(e!=null){return COOKIE_TRW_SESSION_ID+"="+e}return""},getClickPerVisit=function(){var e=null;var t=getCookieDataArray(COOKIE_TRW_SESSION_ID);if(t!=null&&t.length>1){e=parseInt(t[1]);if(isNaN(e)){return null}}return e},getCPVParam=function(){var e=getClickPerVisit();if(e!=null){return COOKIE_TRW_CLICK_PER_VISIT+"="+e}return""};var getEmail=function(){var e=AITag.getCookie(COOKIE_TRW_EMAIL);AITag.deleteCookie(COOKIE_TRW_EMAIL);return e},getEmailParam=function(){var e=getEmail();if(e!=null&&e!=="null"){return COOKIE_TRW_EMAIL+"="+e}return""};var getClicksPerVisitFromCookie=function(e){var t=e.substring(COOKIE_TRW_CLICK_PER_VISIT.length+1,e.length);var n=t.split(encodeURIComponent(SESSION_ID_CLICKS_SEPERATOR));return COOKIE_TRW_CLICK_PER_VISIT+"="+n[1]};this.getCookie=function(e){var t=null,n=document.cookie.split(";");var r=RegExp("^\\s*"+e+"=\\s*(.*?)\\s*$");for(var i=0;i<n.length;i++){var s=n[i].match(r);if(s&&s[1]){t=decodeURIComponent(s[1]);break}}return t};this.setCookie=function(e,t,n,r,i){var s=getDomain(window.location.hostname,domainLevel);if(s=="localhost"){s=null}document.cookie=e+"="+encodeURIComponent(t)+(n==null?"":"; expires="+n.toGMTString())+"; path="+(r==null?"/":r)+(s==null?"":"; domain="+s)+(i==true?"; secure":"")};this.deleteCookie=function(e,t,n,r){var n=getDomain(window.location.hostname,domainLevel);if(n=="localhost"){n=null}var i=new Date;i.setTime(i.getTime()-1);var s=this.getCookie(e);document.cookie=e+"="+s+"; expires="+i.toGMTString()+"; path="+(t==null?"/":t)+(n==null?"":"; domain="+n)+(r==true?"; secure":"")};this.getCookieVal=function(e){var t=document.cookie.indexOf(";",e);if(t==-1){t=document.cookie.length}return decodeURIComponent(document.cookie.substring(e,t))};this.addDynamicScript=function(e,t,n){var r;if(n){r=document.getElementsByTagName("body")[0]}else{r=document.getElementsByTagName("head")[0]||document.documentElement}var i=null;var s=document.createElement("script");s.type="text/javascript";if(e.indexOf("http")!=0&&e.indexOf("https")!=0){e=AITag.getConfig("protocol")+"://"+e}s.src=e;s.onload=s.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){s.onload=s.onreadystatechange=null;clearTimeout(i);i=null;if(typeof t==="function"){t.apply(AITag)}if(r&&s.parentNode){r.removeChild(s)}}};try{i=setTimeout(function(){if(typeof t==="function"){t.apply(AITag)}},AITag.getConfig("timeoutDelay")*second)}catch(o){}if(n){r.appendChild(s)}else{r.insertBefore(s,r.firstChild)}};this.addDynamicJavaScript=function(e){var t=document.createElement("script");t.type="text/javascript";try{t.innerHTML=e}catch(n){t.text=e}document.body.appendChild(t)};this.addDynamicStyle=function(e){var t=document.getElementsByTagName("head")[0];var n=document.createElement("link");if(e.indexOf("http")==-1&&e.indexOf("https")==-1){e=AITag.getConfig("protocol")+"://"+e}n.type="text/css";n.href=e;n.rel="stylesheet";t.appendChild(n)};var addDynamicDiv=function(e,t){var n=document.getElementById("trwDialog");if(!n){n=document.createElement("div");n.setAttribute("id","trwDialog");document.body.appendChild(n)}return AITag.jQuery(n)};this.getStartIndxSearchQuery=function(){var e=-1;var t=document.referrer;if(t.search(/google\.*/i)!=-1||t.search(/altavista\.*/i)!=-1||t.search(/aol\.*/i)!=-1||t.search(/alltheweb\.*/i)!=-1||t.search(/ask\.*/i)!=-1||t.search(/bing\.*/i)!=-1||t.search(/walla\.*/i)!=-1){e=t.search(/q=/)}else{if(t.search(/yahoo\.*/i)!=-1){e=t.search(/p=/)}else{if(t.search(/lycos\.*/i)!=-1){e=t.search(/query=/)}else{if(t.search(/dogpile\.*/i)!=-1){e=t.search(/\/search\/web\/=/)}else{if(t.search(/dmoz\.*/i)!=-1){e=t.search(/search=/)}}}}}return e};this.getSearchTerms=function(){var e=document.referrer;var t=null;if(e&&e!=""){var n=this.getStartIndxSearchQuery();if(n!=-1){t=e.substring(n+2);var r=t.search(/&/);r=r==-1?t.length:r;t=t.substring(0,r);if(t.length!=0){t=t.replace(/\+/g," ");t=decodeURIComponent(t)}}}return t};var validateSessionId=function(e){if(e==null){return false}var t;var n;n=e.split("-");if(n.length<3){return false}if(n[n.length-1].length!=8){return false}t=n[n.length-2];if(!/^\d+$/.test(t)){return false}t="";for(var r=0;r<n.length-2;r++){t+=n[r]+"."}t=t.substring(0,t.length-1);var i=AITag.getConfig("accountId");if(!(t==i.replace(/-/g,"."))){return false}return true};this.createSessionId=function(e){if(this.isNewSession()){newSession=true;sessionId=generateUUID()}var t=addCPV.call(this,sessionId,e);this.deleteCookie(COOKIE_TRW_SESSION_ID);this.setCookie(COOKIE_TRW_SESSION_ID,t[0]+COOKIE_VAL_SEPERATOR+t[1],exp_30_minutes)};this.isNewSession=function(){sessionId=this.getCookie(COOKIE_TRW_SESSION_ID);if(!validateSessionId(getSessionId())){sessionId=null}return sessionId==null};var addCPV=function(e,t){var n=e.split(COOKIE_VAL_SEPERATOR);if(n.length>1){n[1]=parseInt(n[1]);if(!t&&!eventFirstClick){n[1]+=1}}else{var r=this.getCookie(COOKIE_TRW_CLICK_PER_VISIT);if(r!=null){var i=r.split(SESSION_ID_CLICKS_SEPERATOR);var s=parseInt(i[1])+1;n[1]=s}else{n[1]=1}}if(isNaN(n[1])){n[1]="1"}if(t&&!eventFirstClick){eventFirstClick=true}else{eventFirstClick=false}return n};var addVC=function(e){var t=e.split(COOKIE_VAL_SEPERATOR);if(t.length>1){if(this.isNewSession()){t[1]=parseInt(t[1])+1}}else{var n=this.getCookie(COOKIE_TRW_COUNT);if(n!=null){t[1]=parseInt(n);if(this.isNewSession()){t[1]=parseInt(t[1])+1}}else{t[1]=1}}if(isNaN(t[1])){t[1]="1"}return t};this.isNewVisitor=function(){var e=this.getCookie(COOKIE_TRW_VISITOR_UID);if(e==null){newVisitor=true}return newVisitor};this.addVisitorId=function(e){var t=this.getCookie(COOKIE_TRW_VISITOR_UID);if(t==null){newVisitor=true;t=generateUUID()}else{this.deleteCookie(COOKIE_TRW_VISITOR_UID)}var n=addVC.call(this,t);var r=n[0]+COOKIE_VAL_SEPERATOR+n[1];if(n.length>2||e){r+=":1"}this.setCookie(COOKIE_TRW_VISITOR_UID,r,exp_2_year)};var addToTimelineImp=function(e){if(e!==undefined&&e!=null){var t=AITag.getCookie(COOKIE_TRW_IE_CPN);if(t!==undefined&&t!=null&&t.indexOf(e)==-1){AITag.deleteCookie(COOKIE_TRW_IE_CPN);t+=COOKIE_VAL_SEPERATOR+e+IMPRESSION_SUFFIX}else{t=e+IMPRESSION_SUFFIX}AITag.setCookie(COOKIE_TRW_IE_CPN,t,exp_2_year)}};var addToTimelineConv=function(e){if(e!==undefined&&e!=null){var t=AITag.getCookie(COOKIE_TRW_IE_CPN);if(t!==undefined&&t!=null){AITag.deleteCookie(COOKIE_TRW_IE_CPN);if(t.indexOf(e)==-1){t+=COOKIE_VAL_SEPERATOR+e+CONVERSION_SUFFIX}else{t=t.replace(e+IMPRESSION_SUFFIX,e+CONVERSION_SUFFIX)}}else{t=e+CONVERSION_SUFFIX}AITag.setCookie(COOKIE_TRW_IE_CPN,t,exp_2_year)}};this.disableTag=function(e){config.disableClick=true;config.disablePoll=true;config.googleAnalytics=false;config.enableUAnalytics=false;config.enableSiteCatalyst=false;config.trackAsset=false;config.enableRecommendationBar=false;if(window.rtp){window.rtp.d=true}if(e){AITag.updateInitialConfig();var t=getEmail();if(t!==undefined&&t!=null&&t!=""){sendLead(t)}}};this.previewCallback=function(e,t,n){if(config===undefined||config==null){config={}}if(!window.AIConfig){window.AIConfig={}}if(!window.IeraPreview){window.IeraPreview={}}config.stratup=false;config.disableClick=true;config.disablePoll=true;config.googleAnalytics=false;config.enableUAnalytics=false;config.enableSiteCatalyst=false;config.trackAsset=false;config.enableRecommendationBar=false;AITag.updateInitialConfig.apply(AITag);if(typeof window.IeraPreview.previewShowed!="undefined"&&window.IeraPreview.previewShowed){return}else{window.IeraPreview.previewShowed=true}AITag.loadCss.apply(AITag);var r=function(){if(!n){e=decodeURIComponent(e)}var t=AITag.jQuery.parseJSON(e);AITag.msgCallback(t,null,t.isBindConversion)};AITag.loadJQuery(r)};this.pollMsg=function(e,t){if(!checkIESupported()){return}if(e){this.campaignCallback=e}if(t){this.showCampaign=t}AITag.pollIntervalCounter++;var n=AITag.getConfig("gwUrlPrefix")+"/msg?a=2&sid="+getSessionId()+"&aid="+AITag.getConfig("accountId");var r=this.getCookie(COOKIE_MARKETO_TOKEN);if(typeof r!="undefined"&&r!=null&&r!=""){n+="&ma="+encodeURIComponent(r)}msgCallTime=(new Date).getTime();if(AITag.getConfig("pollingPerPage")<=AITag.pollIntervalCounter){AITag.addDynamicScript(n+"&"+Math.random()+"&rts="+msgCallTime,AITag.showInzoneElements)}else{AITag.addDynamicScript(n+"&"+Math.random()+"&rts="+msgCallTime)}logMessage("msg called. Time since view: "+(msgCallTime-viewTime))};var addCampaignToRTPGlobal=function(e,t){var n=window.rtp;if(n&&n.userContext){var r;if(t==0){r=n.userContext.viewedCampaigns}else{if(t==1){r=n.userContext.clickedCampaigns}}if(!r){r=[]}e=e.toString();if(r.indexOf(e)==-1){r.push(e)}if(t==0){window.rtp.userContext.viewedCampaigns=r}else{if(t==1){window.rtp.userContext.clickedCampaigns=r}}}};this.runAsyncQueue=function(){runAsyncQueue()};var presentedCampaigns={};var activeCampaignMap={};this.activateCampaign=function(e){var t=activeCampaignMap[e];if(t){logMessage("Try to inject with script in body");AITag.msgCallback.apply(AITag,t)}};this.msgCallback=function(e,t,n){try{if(AITag.campaignCallback&&typeof AITag.campaignCallback=="function"){AITag.campaignCallback(e,t,n);if(!AITag.showCampaign){return}}}catch(r){}if(presentedCampaigns[e.reactionId]){logMessage(e.reactionId+" is already presented on page, can't show twice");return}var i=e.targetDiv;if(!this.fullyLoaded){if(i&&i!=""&&i!="widget"&&e.useEffect!=true&&e.useEffect!="true"){if(isReady){injectInzoneCampaign(e,t,n)}else{var s=injectInzoneCampaign(e,t,n);if(!s){logMessage("Inzone campaign not injected, inserting into queue");nonjQueryCampaignQueue.push(["msgCallback",e,t,n])}}}else{cpq.push(["msgCallback",e,t,n])}return}logMessageTime("displaying campaign with regular flow. The time since DOM loading: ",(new Date).getTime());pushCampaignData(e,t,n);var o=e.redirect;if(o==true||o=="true"){var u=e.redirectUrl;if(u.indexOf("http://")==-1&&u.indexOf("https://")==-1){u="http://"+u}window.location=u}else{var a=AITag.getReactionDiv(e);if(typeof a!="undefined"){AITag.putReactionInDiv.call(AITag,a,e.content,e.reactionId,t,e.targetDiv,e.useEffect,e.effectType,n);if(a.showDialogCallback){a.showDialogCallback()}}}};this.getReactionDiv=function(e){var t=e.targetDiv;if(t=="widget"){var n=InsighteraWidget.getContentId();if(!InsighteraWidget.isInitilized()){InsighteraWidget.init({widgetPositionTop:e.widgetVerticalPosition===undefined?undefined:e.widgetVerticalPosition+"%",widgetPositionSide:e.widgetSidePosition,tabColor:e.widgetBackgroundColor,contentColor:e.widgetBackgroundColor})}$div=AITag.jQuery("#"+n);$div.showDialogCallback=function(){InsighteraWidget.show()};return $div}else{if(t&&t!=""){if(t=="redirect"){var r=AITag.jQuery(e.content).text().trim();if(r.indexOf("http://")==-1&&r.indexOf("https://")==-1){r="http://"+r}window.location=r}return AITag.jQuery("#"+t)}else{var i=e.resizable!=undefined&&(e.resizable==true||e.resizable=="true");var s=e.modal!=undefined&&(e.modal==true||e.modal=="true");var o=e.height;var u=e.width;var a=e.dialogOpenDuration;var f=e.dialogHeaderBackground;var l=e.dialogContentBackground;var c=e.dialogTitle;return showDialog(e.dialogType,e.hPos,e.vPos,c,s,i,o,u,a,f,l,c,e.autoWidth,e.fitWidth)}}};var showDialog=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){if(isDialogPresented){return}isDialogPresented=true;if(AITag.getConfig("title")!=null&&AITag.getConfig("title")!=""){r=AITag.getConfig("title")}if(typeof c=="undefined"||c==null){c=""}var d=addDynamicDiv(r);if(/^\d+$/.test(t)){t=t*1}if(/^\d+$/.test(n)){n=n*1}var v="left";if(!/^\d+$/.test(t)){v=t}else{var m=AITag.jQuery(window).width();if(t>m/2){v="right"}}var g=AITag.getConfig("dialogArgs");if(g==null){g={autoOpen:false,resizable:s,show:"blind",title:c,hide:{effect:"drop",direction:v,duration:1e3},modal:i,minHeight:50,position:[t,n],dialogClass:"insightera"}}if(o!=undefined){g.height=o}if(h){g.width="auto"}else{if(p){var y=window.innerWidth>0?window.innerWidth:screen.width;var b=window.innerHeight>0?window.innerHeight:screen.height;g.height=b+30;g.width=y}else{if(u!=undefined){g.width=u}}}d.showDialogCallback=function(){var t=d.dialog(g);t.parent(".ui-dialog").addClass("insightera-dialog");if(e=="MODERN_TRIM"){t.parent(".ui-dialog").addClass("insightera-dialog-modern-trim");t.parent(".ui-dialog").find(".ui-widget-header").removeClass("ui-corner-all");if(c==""||c===undefined||c==null){t.parent(".ui-dialog").find(".ui-dialog-title").html("")}var n=cdnSrc+AITag.getConfig("dialogCloseButton");t.parent(".ui-dialog").find(".ui-widget-header .ui-icon").css("background-image","url("+n+")")}else{if(e=="TRANSPARENT"){t.parent(".ui-dialog").addClass("insightera-dialog-transparent");var n=cdnSrc+AITag.getConfig("dialogTransparentButton");t.parent(".ui-dialog").find(".ui-widget-header .ui-dialog-titlebar-close").css("background-image","url("+n+")")}else{if(e=="MODERN_TRIM_2"){t.parent(".ui-dialog").addClass("insightera-dialog-modern-trim-2");var n=cdnSrc+AITag.getConfig("moderntrim2CloseButton");t.parent(".ui-dialog").find(".ui-widget-header .ui-dialog-titlebar-close").css("background-image","url("+n+")")}}}try{AITag.jQuery("body").bind("click",function(e){if(t.dialog("isOpen")&&!AITag.jQuery(e.target).is(".ui-dialog, a")&&!AITag.jQuery(e.target).closest(".ui-dialog").length){t.dialog("close")}})}catch(r){}t.dialog("open");if(typeof f!="undefined"&&f!=null&&f!="#CCCCCC"&&f!="#ccc"&&f!=""&&e!="TRANSPARENT"){AITag.jQuery(".insightera .ui-widget-header").css("background",f)}if(typeof l!="undefined"&&l!=null&&l!="#FFFFFF"&&l!="#fff"&&l!=""&&e!="TRANSPARENT"){AITag.jQuery(".insightera #trwDialog").css("background",l)}var i;if(typeof a!="undefined"&&a!=null){i=a}else{i=AITag.getConfig("dialogCloseTime")}if(!AITag.jQuery.support.opacity){AITag.jQuery(".ui-widget-overlay").css("filter","alpha(opacity=30)")}AITag.jQuery(".ui-widget-overlay").css("z-index","2001");if(i!=-1){window.setTimeout(function(){if(t.is(":visible")){t.dialog("close")}},i*1e3)}};return d};this.conversionCallback=function(){AITag.loadState="conversion callback"};var getConversionParams=function(e,t){var n="";var r=getVisitorId();if(InsighteraUtil.validateParam(r)){n+="&v="+AITag.escapePercent(r)}if(InsighteraUtil.validateParam(e)){n+="&s="+e}if(InsighteraUtil.validateParam(t)){n+="&reqid="+t}var i=getSessionId();if(InsighteraUtil.validateParam(i)){n+="&trwsa.sid="+i}return n};this.bindConversionListener=function(e,t,n){var r=this.jQuery("#"+e);if(r&&r.length>0){AITag.bindConversion(t,n,r)}};this.bindConversion=function(e,t,n){var r=AITag.getConfig("gwUrlPrefix")+"/trw?cmd=1&aid="+AITag.getConfig("accountId")+getConversionParams(e,t);var i=this.getCookie(COOKIE_MARKETO_TOKEN);if(typeof i!="undefined"&&i!=null&&i!=""){r+="&ma="+encodeURIComponent(i)}n.find("a,:submit,:button").click(function(t){var n=r+"&cb=AITag.conversionCallback";var i=t.target||t.srcElement;var s=AITag.jQuery(i).parents("a");if(i.tagName=="A"){var o=i.href;o=removeURIParam(o,["iesrc"]);o=addParams2URI(o,{iesrc:"ctr"});i.href=o}else{if(s.get(0)){var u=s.get(0);if(u.tagName=="A"){var o=u.href;o=removeURIParam(o,["iesrc"]);o=addParams2URI(o,{iesrc:"ctr"});u.href=o}}}AITag.addDynamicScript(n);try{if(isAnalyticsEnabled()){iiq.push(["pushCampaign",e,"Conversion",undefined,undefined,getSessionId()])}}catch(a){}try{if(AITag.getConfig("userContextAPI")){var f=getVisitCount();if(f!=null){rtp("add","toCmpTl",f,e,1)}addCampaignToRTPGlobal(e,1)}}catch(a){}});n.find("a").each(function(){var e=AITag.jQuery(this);var t=e.attr("href");campaignLinks[t]=true});n.find("a").click(function(t){var n=AITag.jQuery(t.currentTarget);var i=n.attr("href");var s=i.substr(0,3).toLowerCase();if(s!="www"&&s!="htt"){return}i=removeURIParam(i,["iesrc"]);i=addParams2URI(i,{iesrc:"ctr"});var o=AITag.getConfig("protocol")+"://"+r+"&rd="+encodeURIComponent(i.replace(/\+/g,"%2B"));try{if(isAnalyticsEnabled()){iiq.push(["pushCampaign",e,"Conversion",undefined,undefined,getSessionId()])}}catch(u){}try{if(AITag.getConfig("userContextAPI")){var a=getVisitCount();if(a!=null){rtp("add","toCmpTl",a,e,1)}addCampaignToRTPGlobal(e,1)}}catch(u){}n.attr("href",o)})};this.putReactionInDiv=function(e,t,n,r,i,s,o,u){if(typeof i!="undefined"&&i!=null&&i!="widget"&&(s==true||s=="true")){logMessage("replacing div "+i+" with effect "+o);e.hide(0,function(){try{e.html(t);var s=o.toLowerCase();var a={};if(s==="scale"){a={percent:0}}else{if(s==="transfer"){a={to:"#button",className:"ui-effects-transfer"}}else{if(s==="size"){a={to:{width:200,height:60}}}}}e.effect(s,a,1e3,function(){});logMessage("HTML was replaced for div "+i+" with effect "+o);if(typeof u==="undefined"||!u){AITag.bindConversion(n,r,e)}}catch(f){logMessage("failed to inject div "+i+". error: "+f.message)}})}else{e.html(t);if(typeof u==="undefined"||!u){AITag.bindConversion(n,r,e)}}};this.emailCallback=function(){AITag.deleteCookie(COOKIE_TRW_EMAIL)};this.setEmailsCookie=function(e){};var getLeadParams=function(e){var t="";AITag.addVisitorId();var n=getVisitorId();if(InsighteraUtil.validateParam(n)){t+="&v="+n}if(InsighteraUtil.validateParam(e)){t+="&e="+e}var r=getSessionId();if(InsighteraUtil.validateParam(r)){t+="&trwsa.sid="+r}return t};var sendLead=function(e,t){var n=AITag.getConfig("gwUrlPrefix")+"/trw?cmd=2&cb=AITag.emailCallback&aid="+AITag.getConfig("accountId")+getLeadParams(e);var r=AITag.getCookie(COOKIE_MARKETO_TOKEN);if(typeof r!="undefined"&&r!=null&&r!=""){n+="&ma="+encodeURIComponent(r)}AITag.addDynamicScript(n,t)};this.foundEmail=function(e,t){if(e!=null){AITag.setCookie(COOKIE_TRW_EMAIL,e,exp_30_minutes);AITag.addVisitorId(true);sendLead(e,t)}};this.checkForEmailTextFields=function(){if(AITag.getConfig("captureLeads")){AITag.checkForEmailTextField()}};this.bindEvent=function(e,t,n,r){AITag.jQuery(e).bind(t,n)};this.checkForEmailTextField=function(){if(window.MktoForms2&&window.MktoForms2.$&&!window.MktoForms2.$("body").data("mktoRendered")){window.MktoForms2.$("body").on("mktoRender",AITag.checkForEmailTextFields)}var e=AITag.getConfig("mailTextField");var t=AITag.getConfig("fieldButtonMap");var n=null,r,i=false;if(e){if(typeof e==="string"){e=[e]}for(var s=0;s<e.length;s++){var o=e[s];if(o){try{var u=AITag.jQuery('input:text[name="'+o+'"]');if(u.length==0){u=AITag.jQuery('input:text[id="'+o+'"]')}if(u.length==0){u=AITag.jQuery('input[name="'+o+'"]')}if(u.length==0){u=AITag.jQuery('input[id="'+o+'"]')}if(u.length==0){u=AITag.jQuery('input[class|="'+o+'"]')}if(u.length==0){continue}}catch(a){if(window.console&&window.console.log&&window.console.log.apply){console.log("fail to find input "+a)}}if(t!==undefined&&t!=null){n=t[o]}else{n=AITag.getConfig("mailButton")}if(typeof n==="string"){n=[n]}if(n){for(var f=0;f<n.length;f++){r=n[f];if(r){try{var l=AITag.jQuery("a,:submit,:button");var c=l.filter("#"+r);if(c.length==0){c=l.find('[name="'+r+'"]');if(c.length==0){c=l.find('[value="'+r+'"]');if(c.length==0){l.each(function(e){if(AITag.jQuery(this).text()==r){if(c.length==0){c=AITag.jQuery(this)}else{c.add(this)}}})}}}}catch(a){if(window.console&&window.console.log&&window.console.log.apply){console.log("fail to find input button "+a)}}try{if(c.length>0&&r=="mktFrmSubmit"){i=true;var h=c.attr("onclick");c.removeAttr("onclick");AITag.bindEvent(c,"click",function(e,t){return function(){var n=e.val();var r;if(typeof t==="function"){r=t}else{r=new Function(t)}if(typeof n!="undefined"&&n!=""){var i=function(){try{return r.apply()}catch(t){}var n=e.parents("form");n.submit()};AITag.foundEmail(e.val(),i);return false}else{return r.apply()}}}(u,h))}else{if(c.length>0){i=true;AITag.bindEvent(c,"click",function(e){return function(){var t=e.val();if(typeof t!="undefined"&&t!=""){AITag.foundEmail(t)}}}(u))}}}catch(a){if(window.console&&window.console.log&&window.console.log.apply){console.log("fail to bind click event on button "+a)}}}}}if(!i){AITag.bindEvent(u.parents("form"),"submit",function(e){return function(){var t=AITag.jQuery(e).val();if(typeof t!="undefined"&&t!=""){AITag.foundEmail(t)}}}(u))}}}}else{if(AITag.getConfig("getAllEmails")){var p=AITag.jQuery("form");p.each(function(){AITag.jQuery(this).submit(function(){AITag.jQuery(this).find(":input").each(function(){var e=AITag.jQuery(this).val();if(EMAIL_REG.test(e)){var t=AITag.jQuery(this).val();if(typeof t!="undefined"&&t!=""){AITag.foundEmail(t)}}else{}})})})}}};this.runAnalyticsIntegration=function(){if(isAnalyticsEnabled()){logMessageTime("import analytics. Time since DOM loading: ",(new Date).getTime());this.addDynamicScript(cdnSrc+GA_CDN_PATH,function(){})}};this.activateCampaignStorage=function(){try{if(checkIESupported()){campaignStorage.exc(["init"]);campaignStorage.exc(["showStoredCampaigns"])}}catch(e){logMessage("failed to load stored campaigns. error: "+e.message)}};this.state="pre-startup";this.startup=function(){if(!window.AIConfig){window.AIConfig={}}this.updateInitialConfig.apply(AITag);this.loadState="post-startup";if(typeof this.pollInterval=="undefined"||this.pollInterval==null){this.pollInterval=""}if(typeof isDialogPresented=="undefined"||isDialogPresented==null){isDialogPresented=false}this.pollIntervalCounter=0;this.activateCampaignStorage();try{this.activateRecommendation.apply(AITag)}catch(e){}try{this.runAnalyticsIntegration.apply(AITag)}catch(e){}this.go();try{bindMessageEvent()}catch(e){}};this.loadCss=function(){if(!this.getConfig("jqueryUiCssExistsOnPage")){this.addDynamicStyle(cdnSrc+this.getConfig("jQueryUICustomCssPath"))}else{this.addDynamicStyle(cdnSrc+this.getConfig("requiredCssPath"))}};this.sendEvent=function(e){this.addVisitorId();this.createSessionId(true);var t="";var n=getSessionIdParam();if(n==""){return}t+="&"+n;var r=getVisitorIdParam();if(r==""){return}t+="&"+r;if(!e||typeof e!="object"||!e.value){return}if(typeof e.value==="string"){e.value=[e.value]}t+="&rtp.ev="+JSON.stringify(e);var i=this.getCookie(COOKIE_MARKETO_TOKEN);var s=this.getConfig("gwUrlPrefix")+"/evt?aid="+this.getConfig("accountId")+t;if(typeof i!="undefined"&&i!=null&&i!=""){s+="&ma="+encodeURIComponent(i)}this.addDynamicScript(s)};var addDefaultParams=function(){var e="";var t=getVisitorIdParam();e+=t!=""?"&"+t:"";var n=getVCParam();e+=n!=""?"&"+n:"";var r=getKnownParam();e+=r!=""?"&"+r:"";var i=getSessionIdParam();e+=i!=""?"&"+i:"";var s=getCPVParam();e+=s!=""?"&"+s:"";var o=getEmailParam();e+=o!=""?"&"+o:"";return e};var getUserContextParams=function(){var e="";if(window.rtp){e=rtp.getTracker().get("userContextParams")}return e};this.sendClick=function(e,t,n,r){if(!AITag.getConfig("disableClick")){this.addVisitorId();this.createSessionId(r);var i="";var s=decodeURIComponent(document.referrer);if(s!=undefined&&s!=""){i="&ref="+encodeURIComponent(s)}var o="";if(typeof e!="undefined"&&e!=""){o="&uri="+e}var u="";if(typeof n!="undefined"){u="&"+addToParams(u,n)}var a=this.getSearchTerms();var f=this.getCookie(COOKIE_MARKETO_TOKEN);var l=this.getConfig("gwUrlPrefix")+"/trw?aid="+this.getConfig("accountId")+i+addDefaultParams()+o+u;if(typeof f!="undefined"&&f!=null&&f!=""){l+="&ma="+encodeURIComponent(f);mktoExistOnClick=true}if(a){l+="&"+COOKIE_TRW_SEARCH_TERMS+"="+a}if(this.getConfig("userContextAPI")){var c=getUserContextParams();if(c!==""){l+="&"+c}}if(newSession){var h=RCMDStorage[getAsParams].call(RCMDStorage);l=addToParams(l,h)}viewTime=(new Date).getTime();this.addDynamicScript(l+"&rts="+viewTime,t);logMessageTime("sending view call. Time since DOM loading: ",(new Date).getTime());sendMktoToken.call(this)}};this.cookiesCleanup=function(){if(!config.disableClick){copyVcCookie();copyCpvCookie();try{for(var e=0;e<unusedCookies.length;e++){this.deleteCookie(unusedCookies[e])}}catch(t){}}};this.main=function(){var e=encodeURIComponent(window.location.href);this.sendClick(e);this.loadJQuery(AITag.afterFullyLoaded);this.loadCss.apply(this);this.loadState="post-main"};var readyQueue=[];this.loadJQuery=function(e){var t=this;var n=typeof jQuery!="undefined";var r=n&&jQuery.fn.jquery==this.getConfig("jQueryVersion");if(!(r||AITag.getConfig("useExistingJQuery"))||AITag.getConfig("loadJquery")){function i(){this.addDynamicScript(this.getConfig("jqueryUrl"),function(){this.afterJQueryLoaded();var t=this.getConfig("jqueryUIUrl");if(this.getConfig("loadOnlyJQueryDialog")){t=cdnSrc+this.getConfig("jQueryUIDialogPath")}this.addDynamicScript(t,function(){jQuery.noConflict(true);addDOMReadyListener(e)})})}if(n){if(jQuery.isReady){i.apply(this)}else{jQuery(document).ready(function(){i.apply(t)})}}else{i.apply(this)}}else{this.afterJQueryLoaded();if(typeof jQuery.ui!="undefined"&&typeof jQuery.ui.dialog!="undefined"){addDOMReadyListener(e)}else{var s=this.getConfig("jqueryUIUrl");if(this.getConfig("loadOnlyJQueryDialog")){s=cdnSrc+this.getConfig("jQueryUIDialogPath")}this.addDynamicScript(s,function(){addDOMReadyListener(e)})}}};this.afterJQueryLoaded=function(){this.loadState="loaded jquery";this.jQuery=jQuery};this.getRCMD=function(e){if(this.fullyLoaded){if(checkIESupported()){ibq.push(["init",{link_color:AITag.getConfig("link_color"),font_family:AITag.getConfig("font_family"),font_size:AITag.getConfig("font_size"),font_color:AITag.getConfig("font_color"),background_color:AITag.getConfig("background_color"),bar_position:AITag.getConfig("bar_position"),bar_tab_position:AITag.getConfig("bar_tab_position"),icon_color:AITag.getConfig("barIconColor"),icon_font:AITag.getConfig("barIconFont"),icon_opacity:AITag.getConfig("barIconOpacity")}]);ibq.push(["getREC",getSessionId(),getVisitorId(),getVisitCount(),e])}}else{rcmdq.push(["getRCMD",e])}};this.afterAllJQueryLoaded=function(){this.fullyLoaded=true;logMessageTime("After All jQuery fully loaded called. Time since DOM loading: ",(new Date).getTime());try{while(cpq.length){var e=cpq.shift();var t=e.shift();AITag[t].apply(AITag,e)}cpq.push=function(e){var t=e.shift();AITag[t].apply(AITag,e)}}catch(n){}this.checkForEmailTextFields.apply(this);if(this.getConfig("trackAsset")){this.addAssetCollector.apply(AITag)}if(this.getConfig("enableRecommendationBar")){if(rcmdq.length>0){try{while(rcmdq.length){var e=rcmdq.shift();var t=e.shift();AITag[t].apply(AITag,e)}rcmdq.push=function(e){var t=e.shift();AITag[t].apply(AITag,e)}}catch(n){}}else{this.getRCMD.call(this,true)}}};this.afterFullyLoaded=function(){this.loadState="fully loaded";var e=this.getConfig("pollingDelay")*second;this.pollAmount=this.getConfig("pollingPerPage");if(this.pollAmount>0&&!this.getConfig("disablePoll")&&checkIESupported()){setTimeout(function(){if(AITag.pollInterval==""){AITag.startPoll();if(AITag.pollIntervalCounter<AITag.pollAmount){AITag.pollInterval=window.setInterval(AITag.startPoll,e)}}},this.getConfig("initialDelay"))}if(typeof this.loadCallBack==="function"){this.loadCallBack()}this.afterAllJQueryLoaded.apply(this)};this.startPoll=function(){AITag.loadState="polling";AITag.pollMsg();if(AITag.pollIntervalCounter>=AITag.pollAmount){clearInterval(AITag.pollInterval);AITag.pollInterval=""}};this.go=function(e){if(AITag.loadState=="post-startup"){AITag.loadCallBack=e;AITag.main.apply(AITag)}else{throw"AI logic failed to continue. Load State is "+AITag.state}};this.hideInzoneElements=function(){if(AITag.getConfig("inZoneBlockingTimeout")!=0){if(inzoneIds!=null&&typeof inzoneIds!="undefined"&&inzoneIds!=""&&inzoneIds.length>0){var e;var t="";for(e=0;e<inzoneIds.length;++e){if(e<inzoneIds.length-1){t+="#"+inzoneIds[e]+","}else{t+="#"+inzoneIds[e]}}t+=" { visibility: hidden; }";var n=document.head||document.getElementsByTagName("head")[0];var r=document.createElement("style");r.type="text/css";r.id="rtpInzoneIdsStyle";if(r.styleSheet){r.styleSheet.cssText=t}else{r.appendChild(document.createTextNode(t))}n.appendChild(r);AITag.showInzoneElementsTimeOut=setTimeout(function(){AITag.showInzoneElements()},AITag.getConfig("inZoneBlockingTimeout"))}}};this.showInzoneElements=function(){if(AITag.getConfig("inZoneBlockingTimeout")!=0){if(inzoneIds!=null&&typeof inzoneIds!="undefined"&&inzoneIds!=""&&inzoneIds.length>0){var e=document.getElementById("rtpInzoneIdsStyle");if(e!=null&&typeof e!="undefined"){var t=getInternetExplorerVersion();if(t>-1&&t<11){var n=e.styleSheet.cssText;n=n.replace("hidden","visible");e.styleSheet.cssText=n}else{var n=e.innerHTML;n=n.replace("hidden","visible");e.innerHTML=n}}if(AITag.showInzoneElementsTimeOut){clearTimeout(AITag.showInzoneElementsTimeOut)}}}}};window.AITag=AITag;AITag.hideInzoneElements();try{var isDebugCookieVal=AITag.getCookie("db_rtp");if(isDebugCookieVal){isDebug=isDebugCookieVal==="true"}}catch(e){}if(window.rtp){var aid=window.rtp&&window.rtp.a;if(aid!==undefined&&aid!=null){AITag.setConfig("accountId",aid)}}if(window.self!==window.top){if(location&&location!==top.location){AITag.disableTag(true)}}try{var pollCampaign=AITag.extractURLParameter("pollCampaign");var previewUUID=AITag.extractURLParameter("rtp.cuid");if(pollCampaign!=null){AITag.previewCallback(pollCampaign,null,true)}else{if(previewUUID!=null){AITag.disableTag();AITag.updateInitialConfig.apply(AITag)}}}catch(e){}try{window.aiq=window.aiq||[];if(window.aiq){while(aiq.length){var param=aiq.shift();var method=param.shift();AITag[method].apply(AITag,param)}aiq.push=function(e){var t=e.shift();AITag[t].apply(AITag,e)}}}catch(e){}try{window.AIConfig=window.AIConfig||{};var startup=typeof AITag.getConfig("startup")!="undefined"&&AITag.getConfig("startup")!=null?AITag.getConfig("startup"):true;var isExcludeUrl=AITag.checkExcludeUrls.apply(AITag);var rtpExists=window.rtp&&window.rtp.a;if(!rtpExists&&startup&&!isExcludeUrl){AITag.cookiesCleanup.apply(AITag);AITag.startup.apply(AITag)}}catch(e){console.log("tag error: "+e)}})();(function(e){var t="widget",n="tab",r="content",i="insightera_widget_button",s="insightera_widget_container",o="insightera_widget_content",u="insightera-widget",a="insightera-widget-",f="insightera-widget-tab",l="insightera-widget-content",c="widget.css",h="http://90d53a0d90598f9cf3a5-dcf1c515f0be6b969f2cc5ae37271723.r87.cf2.rackcdn.com",p="https://42f2433b18538895fc41-dcf1c515f0be6b969f2cc5ae37271723.ssl.cf2.rackcdn.com",d="/black_01.png",v="/black_02.png",m={widgetFontColor:"color",widgetPositionTop:"top",widgetHide:"display",tabColor:"backgroundColor",tabOpacity:"opacity",contentColor:"backgroundColor",contentOpacity:"opacity",contentMinHeight:"min-height",contentPadding:"padding"},g=["widgetTabTooltip","widgetTabText","widgetHide","widgetTabImage","tabHeight","tabWidth"],y=null,b="https:"==document.location.protocol?"https":"http",w=b=="http"?h:p,E={widgetFontColor:"white",widgetPositionTop:"50%",widgetPositionSide:"right",widgetHide:false},S={tabColor:"rgba(0,0,0,0.6)",tabImageClosed:w+d,tabImageOpened:w+v,tabTooltip:"",tabHeight:"59px",tabWidth:" 35px"},x={contentColor:"rgba(0,0,0,0.6)",contentMinHeight:"55px",contentPadding:"0.2em"},T=null,N=null,C=null,k=function(){var e=document.createElement("div");e.style.cssText="background-color:rgba(150,255,150,.5)";if(!!~(""+e.style.backgroundColor).indexOf("rgba")){return true}return false},L=function(e){if(e&&e.indexOf("http")==-1&&e.indexOf("https")==-1){e=b+"//"+e}return e},A=function(e){var t;var n="",r="";var i=0;if(e.indexOf("rgba")==-1){t=e.replace("rgb(","").replace(")","").replace(" ","").split(",")}else{t=e.replace("rgba(","").replace(")","").replace(" ","").split(",")}if(t.length==3){n+="#ff"}else{n+=Math.floor(t[3]*255).toString(16);if(n.length==1){n="#0"+n}else{n="#"+n}}while(i<3){r=(t[i]*1).toString(16);r=r.length==1?"0"+r:r;n+=r;i++}return n},O=function(e,t,n){if(t.addEventListener){t.addEventListener(e,n,true)}else{if(t.attachEvent){t.attachEvent("on"+e,n)}else{t[e]=n}}},M=function(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n,false)}if(e.detachEvent){e.detachEvent("on"+t,n)}},_=function(e){return{width:e.offsetWidth,height:e.offsetHeight}},D=function(e){var t=document.getElementsByTagName("head")[0];var n=document.createElement("link");if(e.indexOf("http")==-1&&e.indexOf("https")==-1){e=b+"://"+e}n.type="text/css";n.href=e;n.rel="stylesheet";t.appendChild(n)},P=function(){if(AITag.jQuery){y=AITag.jQuery}},H=function(){D(w+"/"+c)},B=function(){if(!T){T=document.createElement("div");T.setAttribute("id",i);T.setAttribute("class",u+" "+f+" "+a+E.widgetPositionSide);T.style.display="none";document.body.appendChild(T);O("click",T,function(){if(C.style.display=="none"){q()}else{R()}})}if(!N){N=document.createElement("div");N.setAttribute("id",o);N.setAttribute("class",l);C=document.createElement("div");C.setAttribute("id",s);C.setAttribute("class",u+" "+a+E.widgetPositionSide);C.appendChild(N);C.style.display="none";document.body.appendChild(C)}},j=function(e){for(property in e){if(e.hasOwnProperty(property)){if(property=="tabImageClosed"||property=="tabImageOpened"){S[property]=L(e[property])}else{if(e[property]!=null&&typeof e[property]!="undefined"){if(E.hasOwnProperty(property)){E[property]=e[property]}else{if(S.hasOwnProperty(property)){S[property]=e[property]}else{if(x.hasOwnProperty(property)){x[property]=e[property]}}}}}}}},F=function(){for(var e in E){if(E.hasOwnProperty(e)){if(g.indexOf(e)==-1){T.style[m[e]]=E[e];C.style[m[e]]=E[e]}}}for(var e in S){if(S.hasOwnProperty(e)){if(g.indexOf(e)==-1){if(e=="tabColor"&&S[e].indexOf("rgba")!=-1&&!k()){continue}T.style[m[e]]=S[e]}}}if(S.tabColor.indexOf("rgba")!=-1&&!k()){var t=A(S.tabColor);T.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr="+t+", endColorstr="+t+")"}for(var e in x){if(x.hasOwnProperty(e)&&g.indexOf(e)==-1){if(e=="contentColor"&&x[e].indexOf("rgba")!=-1&&!k()){continue}C.style[m[e]]=x[e]}}if(x.contentColor.indexOf("rgba")!=-1&&!k()){var t=A(x.contentColor);C.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr="+t+", endColorstr="+t+")"}T.setAttribute("title",S.tabTooltip);if(!E.widgetHide){T.style.display="block"}if(S.tabImageClosed==""||S.tabImageClosed===undefined){T.style.height=S.tabHeight;T.style.width=S.tabWidth}else{var n,r;if(E.widgetPositionSide=="right"){n=S.tabImageClosed;r=S.tabImageOpened}else{n=S.tabImageOpened;r=S.tabImageClosed}T.innerHTML+='<img src="'+n+'" id="tabImageClosed"/>';if(typeof S.tabImageOpened!="undefined"){T.innerHTML+='<img src="'+r+'" id="tabImageOpened" style="display:none;"/>'}}},I=function(e){H();j(e);B();F()},q=function(){if(y==null){P()}if(N.childElementCount==0){return}var e=_(T);if(e.width==0){setTimeout(function(){e=_(T);if(e.width==0){C.style[E.widgetPositionSide]=S.tabWidth}else{C.style[E.widgetPositionSide]=e.width+"px"}if(y){y("#insightera_widget_container").show(500)}else{C.style.display="block"}},200)}else{C.style[E.widgetPositionSide]=e.width+"px";if(y){y("#insightera_widget_container").show(500)}else{C.style.display="block"}}var t=document.getElementById("tabImageOpened");if(typeof t!="undefined"){var n=document.getElementById("tabImageClosed");t.style.display="block";n.style.display="none"}},R=function(){if(y){y("#insightera_widget_container").hide(500)}else{C.style.display="none"}var e=document.getElementById("tabImageOpened");if(typeof e!="undefined"){var t=document.getElementById("tabImageClosed");e.style.display="none";t.style.display="block"}},U=function(e){N.innerHTML=e},z=function(t){try{return t()}catch(n){if(e.console&&e.console.log){e.console.log("widget Error: ",n)}}},W=function(){var e=document.getElementsByTagName("body")[0];if(T&&e){e.removeChild(T);T=null}if(C&&e){e.removeChild(C);C=null;N=null}},X={init:function(e){z(function(){I(e)})},injectContent:function(e){z(function(){U(e)})},show:function(){z(function(){q()})},getContentId:function(){return o},isInitilized:function(){if(T&&N&&C){return true}return false},destroy:function(){z(function(){W()})}};if(e.InsighteraWidget===undefined){e.InsighteraWidget=X}})(window);if(!Object.keys){Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if(typeof i!=="object"&&(typeof i!=="function"||i===null)){throw new TypeError("Object.keys called on non-object")}var s=[],o,u;for(o in i){if(e.call(i,o)){s.push(o)}}if(t){for(u=0;u<r;u++){if(e.call(i,n[u])){s.push(n[u])}}}return s}}()}(function(){function pn(e,t,n){e[t]=function(){return n[j](this,arguments)}}function dn(){return L}function vn(){return(new Date).getTime()}function mn(e){if(console&&console.log){console.log("RTP message: "+e)}}function gn(){var e=Array[V][z][W](arguments);for(var t=0;t<e[H];t++){if(e[t]===undefined||e[t]==null||e[t]===""){return true}}return false}function yn(e){var t=parseInt(e);if(!isNaN(t)){return t}return null}function bn(e){return Object[V].toString[W](e)==="[object Object]"}function wn(e){return typeof e==="function"}function En(e,t){var n=new XMLHttpRequest;if("withCredentials"in n){try{n.open(e,t,true)}catch(r){mn(r)}}else{if(typeof XDomainRequest!="undefined"){n=new XDomainRequest;n.open(e,t)}else{n=null}}return n}function Sn(e,t){if(e===undefined||e==null||e==""){return}if(e[R](ot)!=0&&e[R](ut)!=0){e=at+e}var n=En("GET",e);if(!n){mn("CORS not supported");return}n.onload=function(){var e=n.responseText;var r=JSON.parse(e);if(r.status==200){if(typeof t==J){t(r)}}else{mn(r.errorMessage)}};n.onerror=function(){};n.send()}function xn(e){var n=t[et]("head")[0]||t.documentElement;var r=t[G]("script");r.type="text/javascript";r.async=true;if(e[R](ot)!=0&&e[R](ut)!=0){e=at+e}r.src=e;n.insertBefore(r,n.firstChild)}function Tn(e,t){for(var r in t){if(t[$](r)){if(e==""||e==rt){e+=r+"="+n(t[r])}else{e+="&"+r+"="+n(t[r])}}}return e}function Nn(e,t){if(e&&t){var n="";if(e[R](rt)==-1){n+=rt}n=Tn(n,t);if(n!=""&&n!=rt){if(e[R]("#")>-1){var r=e[substringMethod](0,e[R]("#"));r+=n;r+=e[substringMethod](e[R]("#"),e[H]);e=r}else{e+=n}}}return e}function Cn(e,t){if(t&&t===parseInt(t)){for(var n=e[nt](".");n.length>t&&n.length>2;){n.shift()}return n.join(".")}n=/([^.]+\.[^.]{3,})$/i.exec(e);return n!=null?n[1]:(n=/([^.]+\.[^.]+\.[^.]{2})$/i.exec(e),n!=null?n[1]:e)}function kn(){return"xxxxxxxx".replace(/[x]/g,function(e){var t=Math.random()*16|0;return t.toString(16)})}function Ln(){var t=Cn(e[I][K]);return t+"-"+vn()+"-"+kn()}function An(e){var t=_n.getValue(e);if(t!=null){t=t[nt](_n.seperator)}return t}function On(){var e=null;var t=An(Ot);if(t!=null&&t.length>0){e=t[0]}return e}function Mn(){var e=null;var t=An(Mt);if(t!=null&&t.length>0){e=t[0]}return e}function Dn(e){var n=t[G]("a");n[q]=e;e=n[q];return e}function Pn(t){on=true;if(t[R](ot)!=0&&t[R](ut)!=0){t=at+t}e[I]=t}function Hn(e){if(e!==void 0){for(var t=0;t<e[H];t++){if(typeof e[t]==="string"){e[t]=e[t][Z]()}}}return e}function cr(){return Rt}function hr(e){var t,n={},r;if(!gn(e)&&bn(e)&&cr()){var i=Mn();if(e[jn]&&e[jn]==i){for(var s in e){if(e[$](s)){t=$n.exec(s);if(t){n[s]=e[s]}else{if(s==In){r=e[s];n=mr(r,n)}}}}}}return n}function pr(e,t){var n,r={},i;if(cr()&&!gn(t)&&bn(t)){var s=Mn();if(t[jn]&&t[jn]==s){for(var o in t){if(t[$](o)){n=$n.exec(o);if(n){e[y+n[1]]=t[o]}else{if(o==In){i=t[o];r=mr(i,r);if(r[Yn]){e[Qn]=r[Yn][nt](",")}if(r[Zn]){e[Gn]=r[Zn][nt](",")}}}}}}}e.viewedCampaign=dr;e.clickedCampaign=vr}function dr(e){if(gn(e)){return false}if(!(e instanceof Array)){e=[e]}var t=Hr[P][Qn];if(gn(t)){return false}for(var n=0;n<e[H];n++){if(t[R](e[n].toString())>-1){return true}}return false}function vr(e){if(gn(e)){return false}if(!(e instanceof Array)){e=[e]}var t=Hr[P][Gn];if(gn(t)){return false}for(var n=0;n<e[H];n++){if(t[R](e[n].toString())>-1){return true}}return false}function mr(e,t){var n,r,i=[],s=[];for(var o in e){if(e[$](o)){o=e[o];for(var u=0;u<o[H];u++){r=o[u];for(var a in r){if(r[$](a)){if(r[a]==Jn&&i[R](a)==-1){i[F](a)}else{if(r[a]==Kn&&s[R](a)==-1){s[F](a)}}}}}}}if(i[H]>0){t[Yn]=i.join()}if(s[H]>0){t[Zn]=s.join()}return t}function Nr(){if(fn){hn[F]([Tt])}hn[F]([yt])}function Cr(e,t,n,r,i){if(on){return}if(t!==void 0&&n!==void 0&&r!==void 0){var s=t[nt](".");var o=null;e=e[s[0]];if(s[H]>1){o=s[1]}n=Hn(n);if(!(e instanceof Array)){e=[e]}var u;var a=-1;for(var f=0;f<e[H];f++){if(Object[V].toString[W](e[f])==="[object Object]"){if(e[f][$](o)){u=e[f][o]}else{mn("can't match against uknown value");break}}else{u=e[f]}if(typeof u==="string"){u=u[Z]()}if(n[R](u)>-1){a=f;if(!i){break}}}if(!i&&a>-1){Pn(r)}else{if(i&&a==-1){Pn(r)}}}}function kr(e){if(e.status==200){nn=e.results;while(sn.length){var t=sn[B]();t[Y](nn);Cr.apply(this,t)}}}function Lr(){var e="body { display: none; }",n=t.head||t[et]("head")[0]||t.documentElement,r=t[G]("style");r.type="text/css";if(r.styleSheet){r.styleSheet.cssText=e}else{r.appendChild(t.createTextNode(e))}n.appendChild(r)}function Ar(){setTimeout(function(){if(t[et]("body")[0]!==undefined){t[et]("body")[0].style.display="inline"}else{t.addEventListener("DOMContentLoaded",function(){t[et]("body")[0].style.display="inline"},false)}},1e3)}function Or(e,t){if(e&&Kt!=null){if(typeof t==J){var n=On();var r=rt;if(n){r+=Yt+it+n+st}r+=Zt+it+Kt;Sn(e+r,t)}}}function Mr(e,t){var n=vn();if(en&&n-en<It||tn&&n-tn<It){setTimeoutFunction(function(){Mr(e,t)},It)}else{if(Ut){Ut=false;$t.push([e,t]);Wt=setInterval(_r,Vt)}hn[F]([yt,e,t])}}function _r(){zt++;if(zt>Xt){if(Wt){clearInterval(Wt)}return}var e=$t.shift();$t.push(e);Mr(e)}function Br(e){if(!Hr[M][e[O][D]]){Hr[M][e[O][D]]=e}}function jr(){console.log("campaign callback called")}function Fr(e){return void 0!==e&&e!=null&&e!==""}var e=window,t=e.document,n=e.encodeURIComponent,r=e.decodeURIComponent;setTimeoutFunction=e.setTimeout;parseInt=e.parseInt;var i="send",s="get",o="set",u="add",a="setAccount",f="getTracker",l="checkPattern",c="campaign",h="rcmd",p="view",d="event",v="visitor",m="redirect",g="ucontext",y="customVar",b="toCmpTl",w="userContextParams",E="userContextReady",S=new RegExp("^"+y+"([1-5]{1})$"),x=[i,s,o,u],T=[p,d,c,v,h,m,g,b,w],N=[a,f],C=[E],k=[p,d,c,h],L=false,A="rtp",O="trackerData",M="trackers",_="aid",D="name",P="userContext",H="length",B="shift",j="apply",F="push",I="location",q="href",R="indexOf",U="protocol",z="slice",W="call",X="object",V="prototype",$="hasOwnProperty",J="function",K="hostname",Q="match",G="createElement",Y="unshift",Z="toLowerCase",et="getElementsByTagName",tt="splice",nt="split";var rt="?",it="=",st="&",ot="http",ut="https",at=ut+":"==t[I][U]?ut:ot;at=at+"://";var ft="rtp",lt="aiq";var ct=e.AITag,ht="setConfig",pt="getConfig",dt="startup",vt="updateInitialConfig",mt="sendClick",gt="accountId",yt="pollMsg",bt="sendEvent",wt="addAssetCollector",Et="activateRecommendation",St="runAnalyticsIntegration",xt="loadCss",Tt="runAsyncQueue",Nt="afterAllJQueryLoaded",Ct="getRCMD",kt="rh",Lt="loadJQuery",At="cookiesCleanup",Ot="trwsa.sid",Mt="trwv.uid",_t="requestInterval",Dt="isNewVisitor",Pt="addVisitorId",Ht="userContextAPI",Bt="pollingDelay",jt="pollingPerPage",Ft="activateCampaignStorage",It=ct&&ct[pt](_t)!=null?ct[pt](_t):50,qt=ct&&ct[Dt]()?true:false,Rt=ct&&ct[pt](Ht)?true:false,Ut=true,zt=1,Wt=null,Xt=ct&&ct[pt](jt)!=null?ct[pt](jt):1,Vt=ct&&ct[pt](Bt)!=null?ct[pt](Bt)*1e3:50,$t=[];var Jt="cloud2.insightera.com/gw1",Kt=null,Qt="/rtp/api/v1_1/",Gt="visitor",Yt="sid",Zt="aid";var en=null,tn=null,nn=null,rn=false,sn=[],on=false,un=false,an=e[ft]&&e[ft].hb?e[ft].hb:false,fn=false;var ln=e.IeraPreview&&e.IeraPreview.previewShowed;var cn=e.ITLocalStorageAPI;L=e[ft]&&e[ft].d;var hn=e[lt]=e[lt]||[];if(qt&&!ln){ct&&ct[Pt]}if(!ln){hn[F]([vt]);hn[F]([Lt,function(){hn[F]([Nt])}]);hn[F]([xt])}if(!dn()&&!ln){hn[F]([Ft])}var _n=new function(){this.seperator=":";this.store=function(r,i,s,o,u){var a=Cn(e[I][K],void 0);if(a=="localhost"){a=null}t.cookie=r+"="+n(i)+(s==null?"":"; expires="+s.toGMTString())+"; path="+(o==null?"/":o)+(a==null?"":"; domain="+a)+(u==true?"; secure":"")};this.remove=function(e,t,n,r){var i=new Date;i.setTime(i.getTime()-1);var s=this.getValue(e);this.store(e,s,i,t,r)};this.getValue=function(e){var n=null,i=t.cookie[nt](";");var s=RegExp("^\\s*"+e+"=\\s*(.*?)\\s*$");for(var o=0;o<i.length;o++){var u=i[o][Q](s);if(u&&u[1]){n=r(u[1]);break}}return n}};var Bn="rtpUC",jn="vid",Fn="cv",In="ct",qn="vc",Rn=0,Un=6,zn=10,Wn=10,Xn=100,Vn=1e3,$n=new RegExp("^"+Fn+"([1-5]{1})$"),Jn=0,Kn=1,Qn="viewedCampaigns",Gn="clickedCampaigns";var Yn="ctv",Zn="ctc";var er="getUserContext",tr="storeUserContext",nr="storeCustomVar",rr="storeCampaing",ir="validateVisitCount",sr="validateCampaignId",or="validateCampaigntype",ur="addVisitorId",ar="getUserContexParams",fr="getCampaignVisit";var lr={};lr[er]=function(){if(cn.supports()&&cr()){var e=cn.getValue(Bn);if(e!==void 0){e=JSON.parse(e);var t=Mn();if(e[jn]){if(e[jn]===t){return e}}}e={};return this[ur](e)}return null};lr[tr]=function(){if(cn.supports()&&arguments[H]>0&&cr()){var e=arguments[0];if(e!==undefined&&e!==null&&bn(e)){e=JSON.stringify(e);cn.store(Bn,e)}}};lr[ur]=function(e){if(!e[jn]){e[jn]=Mn()}return e};lr[nr]=function(e,t){if(cn.supports()&&cr()){e=yn(e);if(!gn(e,t)&&e>Rn&&e<Un&&t.length<Xn){var n=this[er]();if(n!==null&&bn(n)){n[Fn+e]=t;this[tr](n)}}}};lr[rr]=function(e,t,n){if(cn.supports()&&cr()){if(!gn(e,t,n)){e=yn(e);t=yn(t);n=yn(n);if(this[ir](e)&&this[sr](t)&&this[or](n)){var r=this[er]();if(r!==null&&bn(r)){var i={};i[t]=n;if(!r[In]){r[In]={}}var s=this[fr](r,e);for(var o=0;o<s[H];o++){if(!gn(s[o][t])&&s[o][t]==n){return}}if(s[H]>=Wn){s[B]()}s[F](i);r[In][qn+e]=s;this[tr](r)}}}}};lr[fr]=function(e,t){var n=e[In][qn+t];if(gn(n)){n=[];var r=Object.keys(e[In]);if(r.length>=zn){delete e[In][r[0]]}}return n};lr[ir]=function(e){if(e>0&&e<Vn){return true}return false};lr[sr]=function(e){if(e>0){return true}return false};lr[or]=function(e){if(e==0||e==1){return true}return false};lr[ar]=function(){var e="",t;var n=this[er]();t=hr(n);e=Tn(e,t);return e};var gr=5,yr="addTrigger",br="trigger";var wr=[],Er={};var Sr={};Sr[yr]=function(e,t){if(wn(t)){if(wr[R](e)>-1&&t){return t[j]()}else{var n=Er[e];if(!Fr(n)){n=[]}if(n[H]<gr){n[F](t)}Er[e]=n}}};Sr[br]=function(e){if(wr[R](e)==-1){wr[F](e);var t=Er[e];if(Fr(t)){for(var n=0;n<t[H];n++){try{t[n][j]()}catch(r){}}}}};var xr={};xr.callMethod=function(){var e;for(var t=0;t<arguments[H];t++){e=arguments[t];var n=e[0];if(N[R](n)>-1){this.applyRtp(Hr,n,e)}else{if(x[R](n)>-1){var r=Hr.getTracker(A);this.applyRtp(r,n,e)}else{if(C[R](n)>-1){var i=[][z][W](e,0);i[Y]("");this.applyRtp(Sr,yr,i)}}}}};xr.applyRtp=function(e,t,n){n=[][z][W](n,1);return e[t][j](e,n)};var Tr={};Tr[p]=function(){var t=e[I][q];if(arguments[H]>0){var r=arguments[0];if(typeof r==X){t=Nn(t,r)}else{if(typeof r=="string"){t=Dn(r)}}}t=n(t);en=vn();hn[F]([mt,t,Nr])};Tr[d]=function(){if(arguments[H]>0){var e=arguments[0];if(typeof e==X&&JSON.stringify(e).length<255){var t=0;for(var n in e){if(e[$](n)){t++}}if(t<5){var r=en?vn()-en:null;if(en&&r&&r<It){setTimeoutFunction(function(){tn=vn();rtp(i,d,e)},It-r)}else{tn=vn();hn[F]([bt,e])}}}}};Tr[c]=function(){if(arguments[H]>0){fn=true;var e=void 0,t=void 0;var n=arguments[0];typeof n=="boolean"?t=n:typeof n==J?e=n:void 0;if(e){Mr(e,t)}else{if(t){Mr(e,t)}}}};Tr[v]=function(){if(arguments[H]>0){var e=arguments[0];if(typeof e==J){var t=at+Jt+Qt+Gt;var n=vn(),r=en?n-en:null,i=tn?n-tn:null;if(r&&r<It||i&&i<It){setTimeoutFunction(function(){rtp(s,v,e)},It)}else{Or(t,e)}}}};Tr[h]=function(){var e=null;if(arguments[H]>0){var t=arguments[0];var n=vn()-en;if(en&&n<It){setTimeoutFunction(function(){rtp(s,h,t)},n)}else{hn[F]([Ct,t])}}};Tr[m]=function(){try{if(arguments[H]>2){var t=arguments[0],n=arguments[1],r=arguments[2],i=false;var s=e[I][q];var o=s[R](r);if(o!=-1&&o<8){return}if(arguments[H]>3){i=arguments[3]}if(an&&!un){Lr()}if(rn){if(nn==null){sn[F]([t,n,r,i])}else{Cr(nn,t,n,r,i)}}else{rn=true;sn[F]([t,n,r,i]);Tr[v](kr)}if(an){Ar()}}}catch(u){}};Tr[g]=function(){if(arguments[H]>0){var e=arguments[0];var t=lr[er]();pr(e,t);Hr[P]=e;Sr[br](E)}};Tr[y]=function(){lr[nr][j](lr,arguments)};Tr[b]=function(){lr[rr][j](lr,arguments)};Tr[w]=function(){return lr[ar][j](lr)};var Dr=function(e,t){this[O]={};if(!t||t==""){t=A}this[O][D]=t;this[O][_]=e};var Pr=function(){if(arguments[H]>0){var e=arguments[0];if(T[R](e)>-1){if(dn()&&k[R](e)>-1){return}return xr.applyRtp(Tr,e,arguments)}}};Dr[V].get=Pr;Dr[V].send=Pr;Dr[V].set=function(){if(arguments[H]>0){var e=arguments[0];var t=S.exec(e);if(t!==null){var n=[][z][W](arguments,0);n[tt](1,0,t[1]);return xr.applyRtp(Tr,y,n)}else{if(T[R](e)>-1){if(dn()&&k[R](e)>-1){return}return xr.applyRtp(Tr,e,arguments)}}}};Dr[V].add=Pr;var Hr=function(){return xr.callMethod[j](xr,[arguments])};Hr[a]=function(){var e=arguments[0];if(Fr(e)){var t=A;if(arguments[H]>1){t=arguments[1]}if(this[M][t]){return this[M][t]}var n=new Dr(e,t);Br(n);hn[F]([ht,gt,e]);return n}};Hr[f]=function(){var e=arguments[H]>0&&arguments[0]&&arguments[0]!=""?arguments[0]:A;return Hr[M][e]};Hr[M]={};pn(Hr,f,Hr[f]);pn(Hr,l,InsighteraUtil.checkPattern);if(!ln&&e[ft]){var Ir=e[ft]&&e[ft].q;Kt=e[ft]&&e[ft].a;if(Kt){Hr[a](Kt)}e[ft]=Hr;xr.callMethod[j](xr,Ir)}if(!dn()&&!ln){hn[F]([ht,dt,false]);hn[F]([Et]);hn[F]([St]);hn[F]([At])}})()